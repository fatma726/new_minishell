#!/bin/bash

# Minishell Complete Test Suite (auto-generated)
# Total tests: 521

# Colors
RED='[0;31m'
GREEN='[0;32m'
YELLOW='[1;33m'
BLUE='[0;34m'
MAGENTA='[0;35m'
CYAN='[0;36m'
NC='[0m' # No Color

# Valgrind base command (suppression added if file exists)
VALGRIND_BASE="valgrind --trace-children=yes -s \
    --leak-check=full \
    --show-leak-kinds=all \
    --track-origins=yes \
    --track-fds=yes \
    --log-file=valgrind.log \
    --error-exitcode=42"

TEST_DIR="/tmp/minishell_test_$$"
RESULTS_FILE="test_results.json"
SUMMARY_FILE=""
ARTIFACT_DIR=""
TIMEOUT_SEC="${TIMEOUT_SEC:-8}"

setup_test_env() {
    mkdir -p "$TEST_DIR"
    ORIG="$PWD"
    cd "$TEST_DIR" || exit 1

    # Create test files
    echo "Amour Tu es Horrible" > a
    echo "0123456789" > b
    echo "Prout" > c
    mkdir -p srcs Docs
    : > Makefile
    # Ensure tests that expect missing infile behave as intended
    [ -f pwd ] && rm -f pwd || true

    # Copy minishell binary from original dir
    if [ -f "$ORIG/minishell" ]; then
        cp "$ORIG/minishell" .
        chmod +x ./minishell || true
    else
        echo "${RED}minishell binary not found in $ORIG${NC}" >&2
        exit 1
    fi

    # Build valgrind command (optionally with suppression file)
    VAL_SUPP=""
    if [ -f "$ORIG/valgrind_script/ignore_readline_leaks.txt" ]; then
        mkdir -p valgrind_script
        cp "$ORIG/valgrind_script/ignore_readline_leaks.txt" valgrind_script/
        VAL_SUPP=" --suppressions=valgrind_script/ignore_readline_leaks.txt"
    fi
    VALGRIND_CMD="$VALGRIND_BASE$VAL_SUPP"

    # Artifacts in project folder
    ARTIFACT_DIR="$ORIG/tests/out"
    mkdir -p "$ARTIFACT_DIR/logs"
    RESULTS_FILE="$ARTIFACT_DIR/report.json"
    SUMMARY_FILE="$ARTIFACT_DIR/summary.txt"
    rm -f "$RESULTS_FILE" "$SUMMARY_FILE"
}

cleanup_test_env() {
    cd "${OLDPWD:-/}" 2>/dev/null || true
    rm -rf "$TEST_DIR"
}

check_memory_leaks() {
    if [ ! -f valgrind.log ]; then
        echo "no_log"
        return 1
    fi

    if grep -q "definitely lost: [1-9]" valgrind.log ||        grep -q "indirectly lost: [1-9]" valgrind.log ||         grep -q "Invalid read" valgrind.log ||         grep -q "Invalid write" valgrind.log ||         grep -q "FILE DESCRIPTORS" valgrind.log; then
        echo "leak_detected"
        return 1
    fi

    echo "clean"
    return 0
}

slugify() {
    local s="$1"; s=$(printf "%s" "$s" | tr ' /|:' '____'); s=$(printf "%s" "$s" | tr -cd '[:alnum:]_.-'); printf "%s" "${s:0:60}";
}

run_test() {
    local cmd="$1"
    local expected_exit="$2"
    local description="$3"
    local category="$4"
    local is_bonus="$5"
    local is_interactive="$6"

    # Skip bonus if requested
    if [ "$is_bonus" = "1" ] && [ "$SKIP_BONUS" = "1" ]; then
        return 2
    fi

    # Skip interactive tests unless explicitly requested
    if [ "$is_interactive" = "1" ] && [ "$AUTOMATED" = "1" ]; then
        return 2
    fi

    rm -f valgrind.log output.txt error.txt

    # 1) Run WITHOUT valgrind to capture minishell exit code
    timeout "$TIMEOUT_SEC"s bash -lc 'printf "%s" "$0" | ./minishell > output.txt 2> error.txt' "$cmd"
    nv_status=$?
    actual_exit=$nv_status
    local timeout_nonvg=0
    if [ $nv_status -eq 124 ]; then timeout_nonvg=1; fi

    # 2) Run WITH valgrind for memory checks (ignore its exit for result)
    timeout "$TIMEOUT_SEC"s bash -lc 'printf "%s" "$0" | $VALGRIND_CMD ./minishell > /dev/null 2> /dev/null' "$cmd"
    vg_status=$?
    local timeout_vg=0
    if [ $vg_status -eq 124 ]; then timeout_vg=1; fi

    memory_status=$(check_memory_leaks)

    local result="PASS"
    if [ $timeout_nonvg -eq 1 ]; then
        result="TIMEOUT"
    elif [ "$actual_exit" -ne "$expected_exit" ]; then
        result="FAIL_EXIT"
    elif [ "$memory_status" = "leak_detected" ]; then
        result="FAIL_LEAK"
    fi

    # Save valgrind log per test
    local slug; slug=$(slugify "$description")
    mkdir -p "$ARTIFACT_DIR/logs/$category"
    local val_path="$ARTIFACT_DIR/logs/$category/${slug}.valgrind.txt"
    if [ -f valgrind.log ]; then cp valgrind.log "$val_path"; else echo "No valgrind log (status=$vg_status, timeout=$timeout_vg)" > "$val_path"; fi

    # Append JSON result
    echo "{"cmd":"$(printf '%s' "$cmd" | sed -e 's/\\/\\\\/g' -e 's/"/\"/g')","expected":$expected_exit,"actual":$actual_exit,"result":"$result","category":"$category","description":"$(printf '%s' "$description" | sed 's/"/\"/g')","memory":"$memory_status","timeouts":{"nonvg":$timeout_nonvg,"vg":$timeout_vg}}" >> "$RESULTS_FILE"

    if [ "$result" = "PASS" ]; then
        echo -e "${GREEN}âœ“${NC} $description"
        return 0
    else
        echo -e "${RED}âœ—${NC} $description"
        echo -e "  Command: ${CYAN}$(printf '%s' "$cmd")${NC}"
        echo -e "  Expected exit: $expected_exit, Got: $actual_exit"
        if [ "$memory_status" = "leak_detected" ]; then
            echo -e "  ${RED}Memory leak detected!${NC}"
            grep -A 3 "definitely lost\|indirectly lost\|Invalid" valgrind.log | head -10 || true
        fi
        return 1
    fi
}

# Test data
NUM_TESTS=521
declare -a CMD EXIT DESC CAT BONUS INTER
CMD[0]=''
EXIT[0]=0
DESC[0]='Empty line (enter)'
CAT[0]='syntax'
BONUS[0]=0
INTER[0]=0
CMD[1]='   '
EXIT[1]=0
DESC[1]='Only spaces'
CAT[1]='syntax'
BONUS[1]=0
INTER[1]=0
CMD[2]='		'
EXIT[2]=0
DESC[2]='Only tabs'
CAT[2]='syntax'
BONUS[2]=0
INTER[2]=0
CMD[3]=':'
EXIT[3]=0
DESC[3]='Colon character'
CAT[3]='syntax'
BONUS[3]=0
INTER[3]=0
CMD[4]='!'
EXIT[4]=1
DESC[4]='Exclamation mark'
CAT[4]='syntax'
BONUS[4]=0
INTER[4]=0
CMD[5]='>'
EXIT[5]=2
DESC[5]='Single redirect out'
CAT[5]='syntax'
BONUS[5]=0
INTER[5]=0
CMD[6]='<'
EXIT[6]=2
DESC[6]='Single redirect in'
CAT[6]='syntax'
BONUS[6]=0
INTER[6]=0
CMD[7]='>>'
EXIT[7]=2
DESC[7]='Double redirect out'
CAT[7]='syntax'
BONUS[7]=0
INTER[7]=0
CMD[8]='<<'
EXIT[8]=2
DESC[8]='Heredoc alone'
CAT[8]='syntax'
BONUS[8]=0
INTER[8]=0
CMD[9]='<>'
EXIT[9]=2
DESC[9]='Mixed redirects'
CAT[9]='syntax'
BONUS[9]=0
INTER[9]=0
CMD[10]='>>>>>'
EXIT[10]=2
DESC[10]='Multiple redirect out'
CAT[10]='syntax'
BONUS[10]=0
INTER[10]=0
CMD[11]='>>>>>>>>>>>>>>>'
EXIT[11]=2
DESC[11]='Many redirect out'
CAT[11]='syntax'
BONUS[11]=0
INTER[11]=0
CMD[12]='<<<<<'
EXIT[12]=2
DESC[12]='Multiple heredoc'
CAT[12]='syntax'
BONUS[12]=0
INTER[12]=0
CMD[13]='<<<<<<<<<<<<<<<<'
EXIT[13]=2
DESC[13]='Many heredoc'
CAT[13]='syntax'
BONUS[13]=0
INTER[13]=0
CMD[14]='> > > >'
EXIT[14]=2
DESC[14]='Spaced redirect out'
CAT[14]='syntax'
BONUS[14]=0
INTER[14]=0
CMD[15]='>> >> >> >>'
EXIT[15]=2
DESC[15]='Spaced double redirect'
CAT[15]='syntax'
BONUS[15]=0
INTER[15]=0
CMD[16]='>>>> >> >> >>'
EXIT[16]=2
DESC[16]='Mixed spaced redirects'
CAT[16]='syntax'
BONUS[16]=0
INTER[16]=0
CMD[17]='/'
EXIT[17]=126
DESC[17]='Root directory as command'
CAT[17]='syntax'
BONUS[17]=0
INTER[17]=0
CMD[18]='//'
EXIT[18]=126
DESC[18]='Double slash'
CAT[18]='syntax'
BONUS[18]=0
INTER[18]=0
CMD[19]='/.'
EXIT[19]=126
DESC[19]='Root dot'
CAT[19]='syntax'
BONUS[19]=0
INTER[19]=0
CMD[20]='/./../../../../..'
EXIT[20]=126
DESC[20]='Complex path traversal'
CAT[20]='syntax'
BONUS[20]=0
INTER[20]=0
CMD[21]='///////'
EXIT[21]=126
DESC[21]='Many slashes'
CAT[21]='syntax'
BONUS[21]=0
INTER[21]=0
CMD[22]='-'
EXIT[22]=127
DESC[22]='Dash as command'
CAT[22]='syntax'
BONUS[22]=0
INTER[22]=0
CMD[23]='|'
EXIT[23]=2
DESC[23]='Pipe alone'
CAT[23]='syntax'
BONUS[23]=0
INTER[23]=0
CMD[24]='| hola'
EXIT[24]=2
DESC[24]='Pipe at start'
CAT[24]='syntax'
BONUS[24]=0
INTER[24]=0
CMD[25]='| | |'
EXIT[25]=2
DESC[25]='Multiple pipes'
CAT[25]='syntax'
BONUS[25]=0
INTER[25]=0
CMD[26]='||'
EXIT[26]=2
DESC[26]='Double pipe'
CAT[26]='syntax'
BONUS[26]=0
INTER[26]=0
CMD[27]='|||||'
EXIT[27]=2
DESC[27]='Many pipes'
CAT[27]='syntax'
BONUS[27]=0
INTER[27]=0
CMD[28]='|||||||||||||'
EXIT[28]=2
DESC[28]='Very many pipes'
CAT[28]='syntax'
BONUS[28]=0
INTER[28]=0
CMD[29]='>>|><'
EXIT[29]=2
DESC[29]='Mixed operators'
CAT[29]='syntax'
BONUS[29]=0
INTER[29]=0
CMD[30]='&&'
EXIT[30]=2
DESC[30]='Double ampersand'
CAT[30]='syntax'
BONUS[30]=1
INTER[30]=0
CMD[31]='&&&&&'
EXIT[31]=2
DESC[31]='Multiple ampersands'
CAT[31]='syntax'
BONUS[31]=1
INTER[31]=0
CMD[32]='&&&&&&&&&&&&&&'
EXIT[32]=2
DESC[32]='Many ampersands'
CAT[32]='syntax'
BONUS[32]=1
INTER[32]=0
CMD[33]='"hola"'
EXIT[33]=127
DESC[33]='Quoted string as command'
CAT[33]='syntax'
BONUS[33]=0
INTER[33]=0
CMD[34]=''\''hola'\'''
EXIT[34]=127
DESC[34]='Single quoted as command'
CAT[34]='syntax'
BONUS[34]=0
INTER[34]=0
CMD[35]='hola'
EXIT[35]=127
DESC[35]='Non-existent command'
CAT[35]='syntax'
BONUS[35]=0
INTER[35]=0
CMD[36]='hola que tal'
EXIT[36]=127
DESC[36]='Non-existent with args'
CAT[36]='syntax'
BONUS[36]=0
INTER[36]=0
CMD[37]='Makefile'
EXIT[37]=127
DESC[37]='File as command'
CAT[37]='syntax'
BONUS[37]=0
INTER[37]=0
CMD[38]='echo'
EXIT[38]=0
DESC[38]='Echo alone'
CAT[38]='echo'
BONUS[38]=0
INTER[38]=0
CMD[39]='echo -n'
EXIT[39]=0
DESC[39]='Echo -n alone'
CAT[39]='echo'
BONUS[39]=0
INTER[39]=0
CMD[40]='echo Hola'
EXIT[40]=0
DESC[40]='Echo simple'
CAT[40]='echo'
BONUS[40]=0
INTER[40]=0
CMD[41]='echoHola'
EXIT[41]=127
DESC[41]='Echo without space'
CAT[41]='echo'
BONUS[41]=0
INTER[41]=0
CMD[42]='echo-nHola'
EXIT[42]=127
DESC[42]='Echo-n without space'
CAT[42]='echo'
BONUS[42]=0
INTER[42]=0
CMD[43]='echo -n Hola'
EXIT[43]=0
DESC[43]='Echo -n with text'
CAT[43]='echo'
BONUS[43]=0
INTER[43]=0
CMD[44]='echo "-n" Hola'
EXIT[44]=0
DESC[44]='Echo quoted -n'
CAT[44]='echo'
BONUS[44]=0
INTER[44]=0
CMD[45]='echo -nHola'
EXIT[45]=0
DESC[45]='Echo -n joined'
CAT[45]='echo'
BONUS[45]=0
INTER[45]=0
CMD[46]='echo Hola -n'
EXIT[46]=0
DESC[46]='Echo with -n after'
CAT[46]='echo'
BONUS[46]=0
INTER[46]=0
CMD[47]='echo Hola Que Tal'
EXIT[47]=0
DESC[47]='Echo multiple words'
CAT[47]='echo'
BONUS[47]=0
INTER[47]=0
CMD[48]='echo         Hola'
EXIT[48]=0
DESC[48]='Echo with spaces before'
CAT[48]='echo'
BONUS[48]=0
INTER[48]=0
CMD[49]='echo    Hola     Que    Tal'
EXIT[49]=0
DESC[49]='Echo with many spaces'
CAT[49]='echo'
BONUS[49]=0
INTER[49]=0
CMD[50]='echo -n -n'
EXIT[50]=0
DESC[50]='Echo double -n'
CAT[50]='echo'
BONUS[50]=0
INTER[50]=0
CMD[51]='echo -n -n Hola Que'
EXIT[51]=0
DESC[51]='Echo double -n with text'
CAT[51]='echo'
BONUS[51]=0
INTER[51]=0
CMD[52]='echo -p'
EXIT[52]=0
DESC[52]='Echo invalid flag'
CAT[52]='echo'
BONUS[52]=0
INTER[52]=0
CMD[53]='echo -nnnnn'
EXIT[53]=0
DESC[53]='Echo multiple n'
CAT[53]='echo'
BONUS[53]=0
INTER[53]=0
CMD[54]='echo -n -nnn -nnnn'
EXIT[54]=0
DESC[54]='Echo mixed -n flags'
CAT[54]='echo'
BONUS[54]=0
INTER[54]=0
CMD[55]='echo -n-nnn -nnnn'
EXIT[55]=0
DESC[55]='Echo joined -n'
CAT[55]='echo'
BONUS[55]=0
INTER[55]=0
CMD[56]='echo -n -nnn hola -nnnn'
EXIT[56]=0
DESC[56]='Echo -n with text and more -n'
CAT[56]='echo'
BONUS[56]=0
INTER[56]=0
CMD[57]='echo -n -nnn-nnnn'
EXIT[57]=0
DESC[57]='Echo mixed -n joined'
CAT[57]='echo'
BONUS[57]=0
INTER[57]=0
CMD[58]='echo --------n'
EXIT[58]=0
DESC[58]='Echo many dashes'
CAT[58]='echo'
BONUS[58]=0
INTER[58]=0
CMD[59]='echo -nnn --------n'
EXIT[59]=0
DESC[59]='Echo -n with dashes'
CAT[59]='echo'
BONUS[59]=0
INTER[59]=0
CMD[60]='echo -nnn -----nn---nnnn'
EXIT[60]=0
DESC[60]='Echo complex dashes'
CAT[60]='echo'
BONUS[60]=0
INTER[60]=0
CMD[61]='echo -nnn --------nnnn'
EXIT[61]=0
DESC[61]='Echo dashes ending n'
CAT[61]='echo'
BONUS[61]=0
INTER[61]=0
CMD[62]='echo $'
EXIT[62]=0
DESC[62]='Echo dollar sign'
CAT[62]='echo'
BONUS[62]=0
INTER[62]=0
CMD[63]='echo $?'
EXIT[63]=0
DESC[63]='Echo exit code'
CAT[63]='echo'
BONUS[63]=0
INTER[63]=0
CMD[64]='echo $?$'
EXIT[64]=0
DESC[64]='Echo exit code with dollar'
CAT[64]='echo'
BONUS[64]=0
INTER[64]=0
CMD[65]='echo $? | echo $? | echo $?'
EXIT[65]=0
DESC[65]='Echo exit code piped'
CAT[65]='echo'
BONUS[65]=0
INTER[65]=0
CMD[66]='echo $HOME'
EXIT[66]=0
DESC[66]='Echo HOME variable'
CAT[66]='echo'
BONUS[66]=0
INTER[66]=0
CMD[67]='echo \$HOME'
EXIT[67]=0
DESC[67]='Echo escaped HOME'
CAT[67]='echo'
BONUS[67]=0
INTER[67]=0
CMD[68]='echo my shit terminal is [$TERM]'
EXIT[68]=0
DESC[68]='Echo with TERM'
CAT[68]='echo'
BONUS[68]=0
INTER[68]=0
CMD[69]='echo my shit terminal is [$TERM4'
EXIT[69]=0
DESC[69]='Echo TERM4 no bracket'
CAT[69]='echo'
BONUS[69]=0
INTER[69]=0
CMD[70]='echo my shit terminal is [$TERM4]'
EXIT[70]=0
DESC[70]='Echo TERM4 with bracket'
CAT[70]='echo'
BONUS[70]=0
INTER[70]=0
CMD[71]='echo $UID'
EXIT[71]=0
DESC[71]='Echo UID'
CAT[71]='echo'
BONUS[71]=0
INTER[71]=0
CMD[72]='echo $HOME9'
EXIT[72]=0
DESC[72]='Echo HOME with digit'
CAT[72]='echo'
BONUS[72]=0
INTER[72]=0
CMD[73]='echo $9HOME'
EXIT[73]=0
DESC[73]='Echo digit before HOME'
CAT[73]='echo'
BONUS[73]=0
INTER[73]=0
CMD[74]='echo $HOME%'
EXIT[74]=0
DESC[74]='Echo HOME with percent'
CAT[74]='echo'
BONUS[74]=0
INTER[74]=0
CMD[75]='echo $UID$HOME'
EXIT[75]=0
DESC[75]='Echo UID and HOME'
CAT[75]='echo'
BONUS[75]=0
INTER[75]=0
CMD[76]='echo Le path de mon HOME est $HOME'
EXIT[76]=0
DESC[76]='Echo sentence with HOME'
CAT[76]='echo'
BONUS[76]=0
INTER[76]=0
CMD[77]='echo $hola*'
EXIT[77]=0
DESC[77]='Echo non-existent var with star'
CAT[77]='echo'
BONUS[77]=0
INTER[77]=0
CMD[78]='echo -nnnn $hola'
EXIT[78]=0
DESC[78]='Echo -n with non-existent'
CAT[78]='echo'
BONUS[78]=0
INTER[78]=0
CMD[79]='echo > <'
EXIT[79]=2
DESC[79]='Echo with redirect error'
CAT[79]='echo'
BONUS[79]=0
INTER[79]=0
CMD[80]='echo | |'
EXIT[80]=2
DESC[80]='Echo with pipe error'
CAT[80]='echo'
BONUS[80]=0
INTER[80]=0
CMD[81]='echo $""'
EXIT[81]=0
DESC[81]='Echo dollar empty quotes'
CAT[81]='echo'
BONUS[81]=0
INTER[81]=0
CMD[82]='echo "$"""'
EXIT[82]=0
DESC[82]='Echo quoted dollar'
CAT[82]='echo'
BONUS[82]=0
INTER[82]=0
CMD[83]='echo '\''$'\'''\'''\'''\'''\'''
EXIT[83]=0
DESC[83]='Echo single quote mix'
CAT[83]='echo'
BONUS[83]=0
INTER[83]=0
CMD[84]='echo $"HOME"'
EXIT[84]=0
DESC[84]='Echo dollar quoted HOME'
CAT[84]='echo'
BONUS[84]=0
INTER[84]=0
CMD[85]='echo $'\'''\''HOME'
EXIT[85]=0
DESC[85]='Echo dollar empty single HOME'
CAT[85]='echo'
BONUS[85]=0
INTER[85]=0
CMD[86]='echo $""HOME'
EXIT[86]=0
DESC[86]='Echo dollar empty double HOME'
CAT[86]='echo'
BONUS[86]=0
INTER[86]=0
CMD[87]='echo "$HO"ME'
EXIT[87]=0
DESC[87]='Echo partial quoted HOME'
CAT[87]='echo'
BONUS[87]=0
INTER[87]=0
CMD[88]='echo '\''$HO'\''ME'
EXIT[88]=0
DESC[88]='Echo single quoted HO'
CAT[88]='echo'
BONUS[88]=0
INTER[88]=0
CMD[89]='echo "$HO""ME"'
EXIT[89]=0
DESC[89]='Echo split quoted HOME'
CAT[89]='echo'
BONUS[89]=0
INTER[89]=0
CMD[90]='echo '\''$HO'\'''\''ME'\'''
EXIT[90]=0
DESC[90]='Echo single split HOME'
CAT[90]='echo'
BONUS[90]=0
INTER[90]=0
CMD[91]='echo ""$HOME'
EXIT[91]=0
DESC[91]='Echo empty before HOME'
CAT[91]='echo'
BONUS[91]=0
INTER[91]=0
CMD[92]='echo "" $HOME'
EXIT[92]=0
DESC[92]='Echo empty space HOME'
CAT[92]='echo'
BONUS[92]=0
INTER[92]=0
CMD[93]='echo '\'''\''$HOME'
EXIT[93]=0
DESC[93]='Echo single empty HOME'
CAT[93]='echo'
BONUS[93]=0
INTER[93]=0
CMD[94]='echo '\'''\'' $HOME'
EXIT[94]=0
DESC[94]='Echo single empty space HOME'
CAT[94]='echo'
BONUS[94]=0
INTER[94]=0
CMD[95]='echo $"HO""ME"'
EXIT[95]=0
DESC[95]='Echo dollar split HOMME'
CAT[95]='echo'
BONUS[95]=0
INTER[95]=0
CMD[96]='echo $'\''HO'\'''\''ME'\'''
EXIT[96]=0
DESC[96]='Echo dollar single split'
CAT[96]='echo'
BONUS[96]=0
INTER[96]=0
CMD[97]='echo $'\''HOME'\'''
EXIT[97]=0
DESC[97]='Echo dollar single HOME'
CAT[97]='echo'
BONUS[97]=0
INTER[97]=0
CMD[98]='echo "$"HOME'
EXIT[98]=0
DESC[98]='Echo quoted dollar HOME'
CAT[98]='echo'
BONUS[98]=0
INTER[98]=0
CMD[99]='echo $=HOME'
EXIT[99]=0
DESC[99]='Echo dollar equals HOME'
CAT[99]='echo'
BONUS[99]=0
INTER[99]=0
CMD[100]='echo $"HOLA"'
EXIT[100]=0
DESC[100]='Echo dollar quoted HOLA'
CAT[100]='echo'
BONUS[100]=0
INTER[100]=0
CMD[101]='echo $'\''HOLA'\'''
EXIT[101]=0
DESC[101]='Echo dollar single HOLA'
CAT[101]='echo'
BONUS[101]=0
INTER[101]=0
CMD[102]='echo $DONTEXIST Hola'
EXIT[102]=0
DESC[102]='Echo non-existent var'
CAT[102]='echo'
BONUS[102]=0
INTER[102]=0
CMD[103]='echo "hola"'
EXIT[103]=0
DESC[103]='Echo double quoted'
CAT[103]='echo'
BONUS[103]=0
INTER[103]=0
CMD[104]='echo '\''hola'\'''
EXIT[104]=0
DESC[104]='Echo single quoted'
CAT[104]='echo'
BONUS[104]=0
INTER[104]=0
CMD[105]='echo '\'''\''hola'\'''\'''
EXIT[105]=0
DESC[105]='Echo empty quotes around'
CAT[105]='echo'
BONUS[105]=0
INTER[105]=0
CMD[106]='echo '\'''\''h'\''o'\''la'\'''\'''
EXIT[106]=0
DESC[106]='Echo split quotes'
CAT[106]='echo'
BONUS[106]=0
INTER[106]=0
CMD[107]='echo "'\'''\''h'\''o'\''la'\'''\''"'
EXIT[107]=0
DESC[107]='Echo double wrap single'
CAT[107]='echo'
BONUS[107]=0
INTER[107]=0
CMD[108]='echo "'\''"h'\''o'\''la"'\''"'
EXIT[108]=0
DESC[108]='Echo complex quote mix'
CAT[108]='echo'
BONUS[108]=0
INTER[108]=0
CMD[109]='echo"'\''hola'\''"'
EXIT[109]=0
DESC[109]='Echo joined quoted'
CAT[109]='echo'
BONUS[109]=0
INTER[109]=0
CMD[110]='echo "'\''hola'\''"'
EXIT[110]=0
DESC[110]='Echo double wrap single hola'
CAT[110]='echo'
BONUS[110]=0
INTER[110]=0
CMD[111]='echo '\''"hola"'\'''
EXIT[111]=0
DESC[111]='Echo single wrap double'
CAT[111]='echo'
BONUS[111]=0
INTER[111]=0
CMD[112]='echo '\'''\'''\''ho"'\'''\'''\'''\''l"a'\'''\'''\'''
EXIT[112]=0
DESC[112]='Echo complex quotes'
CAT[112]='echo'
BONUS[112]=0
INTER[112]=0
CMD[113]='echo hola""""""""""'
EXIT[113]=0
DESC[113]='Echo many empty doubles'
CAT[113]='echo'
BONUS[113]=0
INTER[113]=0
CMD[114]='echo hola"'\'''\'''\'''\'''\'''\'''\'''\'''\'''\''"'
EXIT[114]=0
DESC[114]='Echo singles in doubles'
CAT[114]='echo'
BONUS[114]=0
INTER[114]=0
CMD[115]='echo hola'\'''\'''\'''\'''\'''\'''\'''\'''\'''\'''\'''\'''
EXIT[115]=0
DESC[115]='Echo many empty singles'
CAT[115]='echo'
BONUS[115]=0
INTER[115]=0
CMD[116]='echo hola'\''"""""""""'\'''
EXIT[116]=0
DESC[116]='Echo doubles in singles'
CAT[116]='echo'
BONUS[116]=0
INTER[116]=0
CMD[117]='e"cho hola"'
EXIT[117]=127
DESC[117]='Command with quotes'
CAT[117]='echo'
BONUS[117]=0
INTER[117]=0
CMD[118]='e'\''cho hola'\'''
EXIT[118]=127
DESC[118]='Command with single quotes'
CAT[118]='echo'
BONUS[118]=0
INTER[118]=0
CMD[119]='echo ""hola'
EXIT[119]=0
DESC[119]='Echo empty joined hola'
CAT[119]='echo'
BONUS[119]=0
INTER[119]=0
CMD[120]='echo "" hola'
EXIT[120]=0
DESC[120]='Echo empty space hola'
CAT[120]='echo'
BONUS[120]=0
INTER[120]=0
CMD[121]='echo ""             hola'
EXIT[121]=0
DESC[121]='Echo empty spaces hola'
CAT[121]='echo'
BONUS[121]=0
INTER[121]=0
CMD[122]='echo hola""bonjour'
EXIT[122]=0
DESC[122]='Echo joined words'
CAT[122]='echo'
BONUS[122]=0
INTER[122]=0
CMD[123]='"e"'\''c'\''ho '\''b'\''"o"nj"o"'\''u'\''r'
EXIT[123]=0
DESC[123]='Complex quote command'
CAT[123]='echo'
BONUS[123]=0
INTER[123]=0
CMD[124]='echo "$DONTEXIST"Makefile'
EXIT[124]=0
DESC[124]='Echo empty var Makefile'
CAT[124]='echo'
BONUS[124]=0
INTER[124]=0
CMD[125]='echo "$DONTEXIST""Makefile"'
EXIT[125]=0
DESC[125]='Echo empty var quoted'
CAT[125]='echo'
BONUS[125]=0
INTER[125]=0
CMD[126]='echo "$DONTEXIST" "Makefile"'
EXIT[126]=0
DESC[126]='Echo empty var space quoted'
CAT[126]='echo'
BONUS[126]=0
INTER[126]=0
CMD[127]='$?'
EXIT[127]=127
DESC[127]='Dollar question as command'
CAT[127]='variables'
BONUS[127]=0
INTER[127]=0
CMD[128]='$?$?'
EXIT[128]=127
DESC[128]='Double dollar question'
CAT[128]='variables'
BONUS[128]=0
INTER[128]=0
CMD[129]='?$HOME'
EXIT[129]=127
DESC[129]='Question mark HOME'
CAT[129]='variables'
BONUS[129]=0
INTER[129]=0
CMD[130]='$'
EXIT[130]=127
DESC[130]='Dollar alone'
CAT[130]='variables'
BONUS[130]=0
INTER[130]=0
CMD[131]='$HOME'
EXIT[131]=126
DESC[131]='HOME as command'
CAT[131]='variables'
BONUS[131]=0
INTER[131]=0
CMD[132]='$HOMEdskjhfkdshfsd'
EXIT[132]=0
DESC[132]='HOME with garbage'
CAT[132]='variables'
BONUS[132]=0
INTER[132]=0
CMD[133]='"$HOMEdskjhfkdshfsd"'
EXIT[133]=127
DESC[133]='Quoted HOME garbage'
CAT[133]='variables'
BONUS[133]=0
INTER[133]=0
CMD[134]=''\''$HOMEdskjhfkdshfsd'\'''
EXIT[134]=127
DESC[134]='Single quoted HOME garbage'
CAT[134]='variables'
BONUS[134]=0
INTER[134]=0
CMD[135]='$DONTEXIST'
EXIT[135]=0
DESC[135]='Non-existent variable'
CAT[135]='variables'
BONUS[135]=0
INTER[135]=0
CMD[136]='$LESS$VAR'
EXIT[136]=127
DESC[136]='Multiple variables'
CAT[136]='variables'
BONUS[136]=0
INTER[136]=0
CMD[137]='CTRL-C'
EXIT[137]=130
DESC[137]='Ctrl-C signal'
CAT[137]='signals'
BONUS[137]=0
INTER[137]=1
CMD[138]='CTRL-D'
EXIT[138]=0
DESC[138]='Ctrl-D exit'
CAT[138]='signals'
BONUS[138]=0
INTER[138]=1
CMD[139]='CTRL-\'
EXIT[139]=131
DESC[139]='Ctrl-\ quit'
CAT[139]='signals'
BONUS[139]=0
INTER[139]=1
CMD[140]='env'
EXIT[140]=0
DESC[140]='Print environment'
CAT[140]='env'
BONUS[140]=0
INTER[140]=0
CMD[141]='export'
EXIT[141]=0
DESC[141]='Export list'
CAT[141]='export'
BONUS[141]=0
INTER[141]=0
CMD[142]='export HOLA=bonjour'
EXIT[142]=0
DESC[142]='Export simple'
CAT[142]='export'
BONUS[142]=0
INTER[142]=0
CMD[143]='export       HOLA=bonjour'
EXIT[143]=0
DESC[143]='Export with spaces'
CAT[143]='export'
BONUS[143]=0
INTER[143]=0
CMD[144]='export Hola'
EXIT[144]=0
DESC[144]='Export without value'
CAT[144]='export'
BONUS[144]=0
INTER[144]=0
CMD[145]='export Hola9hey'
EXIT[145]=0
DESC[145]='Export alphanumeric'
CAT[145]='export'
BONUS[145]=0
INTER[145]=0
CMD[146]='export $DONTEXIST'
EXIT[146]=0
DESC[146]='Export non-existent'
CAT[146]='export'
BONUS[146]=0
INTER[146]=0
CMD[147]='export ""'
EXIT[147]=1
DESC[147]='Export empty quotes'
CAT[147]='export'
BONUS[147]=0
INTER[147]=0
CMD[148]='export ='
EXIT[148]=1
DESC[148]='Export equals alone'
CAT[148]='export'
BONUS[148]=0
INTER[148]=0
CMD[149]='export %'
EXIT[149]=1
DESC[149]='Export percent'
CAT[149]='export'
BONUS[149]=0
INTER[149]=0
CMD[150]='export $?'
EXIT[150]=1
DESC[150]='Export exit code'
CAT[150]='export'
BONUS[150]=0
INTER[150]=0
CMD[151]='export ?=2'
EXIT[151]=1
DESC[151]='Export question equals'
CAT[151]='export'
BONUS[151]=0
INTER[151]=0
CMD[152]='export 9HOLA='
EXIT[152]=1
DESC[152]='Export starts with digit'
CAT[152]='export'
BONUS[152]=0
INTER[152]=0
CMD[153]='export HOLA9=bonjour'
EXIT[153]=0
DESC[153]='Export digit in name'
CAT[153]='export'
BONUS[153]=0
INTER[153]=0
CMD[154]='export _HOLA=bonjour'
EXIT[154]=0
DESC[154]='Export underscore start'
CAT[154]='export'
BONUS[154]=0
INTER[154]=0
CMD[155]='export ___HOLA=bonjour'
EXIT[155]=0
DESC[155]='Export multiple underscores'
CAT[155]='export'
BONUS[155]=0
INTER[155]=0
CMD[156]='export _HO_LA_=bonjour'
EXIT[156]=0
DESC[156]='Export underscores mixed'
CAT[156]='export'
BONUS[156]=0
INTER[156]=0
CMD[157]='export HOL@=bonjour'
EXIT[157]=1
DESC[157]='Export with at sign'
CAT[157]='export'
BONUS[157]=0
INTER[157]=0
CMD[158]='export -HOLA=bonjour'
EXIT[158]=2
DESC[158]='Export invalid option'
CAT[158]='export'
BONUS[158]=0
INTER[158]=0
CMD[159]='export --HOLA=bonjour'
EXIT[159]=2
DESC[159]='Export double dash'
CAT[159]='export'
BONUS[159]=0
INTER[159]=0
CMD[160]='export HOLA-=bonjour'
EXIT[160]=1
DESC[160]='Export dash in name'
CAT[160]='export'
BONUS[160]=0
INTER[160]=0
CMD[161]='export HO-LA=bonjour'
EXIT[161]=1
DESC[161]='Export dash middle'
CAT[161]='export'
BONUS[161]=0
INTER[161]=0
CMD[162]='export HOL.A=bonjour'
EXIT[162]=1
DESC[162]='Export dot in name'
CAT[162]='export'
BONUS[162]=0
INTER[162]=0
CMD[163]='export HOL}A=bonjour'
EXIT[163]=1
DESC[163]='Export brace in name'
CAT[163]='export'
BONUS[163]=0
INTER[163]=0
CMD[164]='export HOL{A=bonjour'
EXIT[164]=1
DESC[164]='Export open brace'
CAT[164]='export'
BONUS[164]=0
INTER[164]=0
CMD[165]='export HO*LA=bonjour'
EXIT[165]=1
DESC[165]='Export star in name'
CAT[165]='export'
BONUS[165]=0
INTER[165]=0
CMD[166]='export HO#LA=bonjour'
EXIT[166]=1
DESC[166]='Export hash in name'
CAT[166]='export'
BONUS[166]=0
INTER[166]=0
CMD[167]='export HO@LA=bonjour'
EXIT[167]=1
DESC[167]='Export at in name'
CAT[167]='export'
BONUS[167]=0
INTER[167]=0
CMD[168]='export HO$?LA=bonjour'
EXIT[168]=0
DESC[168]='Export with exit code'
CAT[168]='export'
BONUS[168]=0
INTER[168]=0
CMD[169]='export +HOLA=bonjour'
EXIT[169]=1
DESC[169]='Export plus start'
CAT[169]='export'
BONUS[169]=0
INTER[169]=0
CMD[170]='export HOL+A=bonjour'
EXIT[170]=1
DESC[170]='Export plus middle'
CAT[170]='export'
BONUS[170]=0
INTER[170]=0
CMD[171]='export HOLA =bonjour'
EXIT[171]=1
DESC[171]='Export space before equals'
CAT[171]='export'
BONUS[171]=0
INTER[171]=0
CMD[172]='export HOLA = bonjour'
EXIT[172]=1
DESC[172]='Export spaces around equals'
CAT[172]='export'
BONUS[172]=0
INTER[172]=0
CMD[173]='export HOLA=bon jour'
EXIT[173]=0
DESC[173]='Export with space in value'
CAT[173]='export'
BONUS[173]=0
INTER[173]=0
CMD[174]='export HOLA= bonjour'
EXIT[174]=0
DESC[174]='Export space after equals'
CAT[174]='export'
BONUS[174]=0
INTER[174]=0
CMD[175]='export HOLA=$HOME'
EXIT[175]=0
DESC[175]='Export HOME value'
CAT[175]='export'
BONUS[175]=0
INTER[175]=0
CMD[176]='export HOLA=bonjour$HOME'
EXIT[176]=0
DESC[176]='Export concat HOME'
CAT[176]='export'
BONUS[176]=0
INTER[176]=0
CMD[177]='export HOLA=$HOMEbonjour'
EXIT[177]=0
DESC[177]='Export HOME prefix'
CAT[177]='export'
BONUS[177]=0
INTER[177]=0
CMD[178]='export HOLA=bon$jour'
EXIT[178]=0
DESC[178]='Export non-existent var'
CAT[178]='export'
BONUS[178]=0
INTER[178]=0
CMD[179]='export HOLA=bon@jour'
EXIT[179]=0
DESC[179]='Export at in value'
CAT[179]='export'
BONUS[179]=0
INTER[179]=0
CMD[180]='export HOLA=bon""jour""'
EXIT[180]=0
DESC[180]='Export quoted value'
CAT[180]='export'
BONUS[180]=0
INTER[180]=0
CMD[181]='export HOLA$USER=bonjour'
EXIT[181]=0
DESC[181]='Export var in name'
CAT[181]='export'
BONUS[181]=0
INTER[181]=0
CMD[182]='export HOLA=bonjour BYE=casse-toi'
EXIT[182]=0
DESC[182]='Export multiple'
CAT[182]='export'
BONUS[182]=0
INTER[182]=0
CMD[183]='export $HOLA=bonjour'
EXIT[183]=0
DESC[183]='Export dollar var name'
CAT[183]='export'
BONUS[183]=0
INTER[183]=0
CMD[184]='export HOLA=""bonjour      ""'
EXIT[184]=0
DESC[184]='Export quoted spaces'
CAT[184]='export'
BONUS[184]=0
INTER[184]=0
CMD[185]='export HOLA=""   -n bonjour   ""'
EXIT[185]=0
DESC[185]='Export -n in value'
CAT[185]='export'
BONUS[185]=0
INTER[185]=0
CMD[186]='export HOLA='\''""'\'''
EXIT[186]=0
DESC[186]='Export quotes in quotes'
CAT[186]='export'
BONUS[186]=0
INTER[186]=0
CMD[187]='export HOLA=at'
EXIT[187]=0
DESC[187]='Export simple at'
CAT[187]='export'
BONUS[187]=0
INTER[187]=0
CMD[188]='export """" HOLA=bonjour'
EXIT[188]=1
DESC[188]='Export empty before name'
CAT[188]='export'
BONUS[188]=0
INTER[188]=0
CMD[189]='export HOLA=""cat Makefile | grep NAME""'
EXIT[189]=0
DESC[189]='Export command in value'
CAT[189]='export'
BONUS[189]=0
INTER[189]=0
CMD[190]='export HOLA=""  bonjour  hey  ""'
EXIT[190]=0
DESC[190]='Export spaced value'
CAT[190]='export'
BONUS[190]=0
INTER[190]=0
CMD[191]='export HOL=A=bonjour'
EXIT[191]=0
DESC[191]='Export equals in name'
CAT[191]='export'
BONUS[191]=0
INTER[191]=0
CMD[192]='export HOL=A=""""'
EXIT[192]=0
DESC[192]='Export empty value'
CAT[192]='export'
BONUS[192]=0
INTER[192]=0
CMD[193]='export ""=""'
EXIT[193]=1
DESC[193]='Export all empty'
CAT[193]='export'
BONUS[193]=0
INTER[193]=0
CMD[194]='export '\'''\''='\'''\'''
EXIT[194]=1
DESC[194]='Export single empty'
CAT[194]='export'
BONUS[194]=0
INTER[194]=0
CMD[195]='export "="="="'
EXIT[195]=1
DESC[195]='Export triple equals'
CAT[195]='export'
BONUS[195]=0
INTER[195]=0
CMD[196]='export '\''='\''='\''='\'''
EXIT[196]=1
DESC[196]='Export single equals'
CAT[196]='export'
BONUS[196]=0
INTER[196]=0
CMD[197]='unset HOLA'
EXIT[197]=0
DESC[197]='Unset variable'
CAT[197]='unset'
BONUS[197]=0
INTER[197]=0
CMD[198]='unset ""'
EXIT[198]=1
DESC[198]='Unset empty'
CAT[198]='unset'
BONUS[198]=0
INTER[198]=0
CMD[199]='unset INEXISTANT'
EXIT[199]=0
DESC[199]='Unset non-existent'
CAT[199]='unset'
BONUS[199]=0
INTER[199]=0
CMD[200]='unset PWD'
EXIT[200]=0
DESC[200]='Unset PWD'
CAT[200]='unset'
BONUS[200]=0
INTER[200]=0
CMD[201]='unset OLDPWD'
EXIT[201]=0
DESC[201]='Unset OLDPWD'
CAT[201]='unset'
BONUS[201]=0
INTER[201]=0
CMD[202]='unset 9HOLA'
EXIT[202]=1
DESC[202]='Unset starts with digit'
CAT[202]='unset'
BONUS[202]=0
INTER[202]=0
CMD[203]='unset HOLA9'
EXIT[203]=0
DESC[203]='Unset ends with digit'
CAT[203]='unset'
BONUS[203]=0
INTER[203]=0
CMD[204]='unset HOL?A'
EXIT[204]=1
DESC[204]='Unset with question'
CAT[204]='unset'
BONUS[204]=0
INTER[204]=0
CMD[205]='unset HOLA='
EXIT[205]=1
DESC[205]='Unset with equals'
CAT[205]='unset'
BONUS[205]=0
INTER[205]=0
CMD[206]='unset HOL.A'
EXIT[206]=1
DESC[206]='Unset with dot'
CAT[206]='unset'
BONUS[206]=0
INTER[206]=0
CMD[207]='unset HOL+A'
EXIT[207]=1
DESC[207]='Unset with plus'
CAT[207]='unset'
BONUS[207]=0
INTER[207]=0
CMD[208]='unset HOL=A'
EXIT[208]=1
DESC[208]='Unset with equals middle'
CAT[208]='unset'
BONUS[208]=0
INTER[208]=0
CMD[209]='unset HOL{A'
EXIT[209]=1
DESC[209]='Unset with open brace'
CAT[209]='unset'
BONUS[209]=0
INTER[209]=0
CMD[210]='unset HOL}A'
EXIT[210]=1
DESC[210]='Unset with close brace'
CAT[210]='unset'
BONUS[210]=0
INTER[210]=0
CMD[211]='unset HOL-A'
EXIT[211]=1
DESC[211]='Unset with dash'
CAT[211]='unset'
BONUS[211]=0
INTER[211]=0
CMD[212]='unset -HOLA'
EXIT[212]=2
DESC[212]='Unset invalid option'
CAT[212]='unset'
BONUS[212]=0
INTER[212]=0
CMD[213]='unset _HOLA'
EXIT[213]=0
DESC[213]='Unset underscore start'
CAT[213]='unset'
BONUS[213]=0
INTER[213]=0
CMD[214]='unset HOL_A'
EXIT[214]=0
DESC[214]='Unset underscore middle'
CAT[214]='unset'
BONUS[214]=0
INTER[214]=0
CMD[215]='unset HOLA_'
EXIT[215]=0
DESC[215]='Unset underscore end'
CAT[215]='unset'
BONUS[215]=0
INTER[215]=0
CMD[216]='unset HOL*A'
EXIT[216]=1
DESC[216]='Unset with star'
CAT[216]='unset'
BONUS[216]=0
INTER[216]=0
CMD[217]='unset HOL#A'
EXIT[217]=1
DESC[217]='Unset with hash'
CAT[217]='unset'
BONUS[217]=0
INTER[217]=0
CMD[218]='unset $HOLA'
EXIT[218]=0
DESC[218]='Unset dollar var'
CAT[218]='unset'
BONUS[218]=0
INTER[218]=0
CMD[219]='unset $PWD'
EXIT[219]=1
DESC[219]='Unset dollar PWD'
CAT[219]='unset'
BONUS[219]=0
INTER[219]=0
CMD[220]='unset HOL@'
EXIT[220]=1
DESC[220]='Unset with at'
CAT[220]='unset'
BONUS[220]=0
INTER[220]=0
CMD[221]='unset HOL^A'
EXIT[221]=1
DESC[221]='Unset with caret'
CAT[221]='unset'
BONUS[221]=0
INTER[221]=0
CMD[222]='unset HOL$?A'
EXIT[222]=0
DESC[222]='Unset with exit code'
CAT[222]='unset'
BONUS[222]=0
INTER[222]=0
CMD[223]='unset ='
EXIT[223]=0
DESC[223]='Unset equals'
CAT[223]='unset'
BONUS[223]=0
INTER[223]=0
CMD[224]='unset ======'
EXIT[224]=0
DESC[224]='Unset many equals'
CAT[224]='unset'
BONUS[224]=0
INTER[224]=0
CMD[225]='unset ++++++'
EXIT[225]=0
DESC[225]='Unset many plus'
CAT[225]='unset'
BONUS[225]=0
INTER[225]=0
CMD[226]='unset _______'
EXIT[226]=0
DESC[226]='Unset many underscores'
CAT[226]='unset'
BONUS[226]=0
INTER[226]=0
CMD[227]='unset export'
EXIT[227]=0
DESC[227]='Unset export'
CAT[227]='unset'
BONUS[227]=0
INTER[227]=0
CMD[228]='unset echo'
EXIT[228]=0
DESC[228]='Unset echo'
CAT[228]='unset'
BONUS[228]=0
INTER[228]=0
CMD[229]='unset pwd'
EXIT[229]=0
DESC[229]='Unset pwd'
CAT[229]='unset'
BONUS[229]=0
INTER[229]=0
CMD[230]='unset cd'
EXIT[230]=0
DESC[230]='Unset cd'
CAT[230]='unset'
BONUS[230]=0
INTER[230]=0
CMD[231]='unset unset'
EXIT[231]=0
DESC[231]='Unset unset'
CAT[231]='unset'
BONUS[231]=0
INTER[231]=0
CMD[232]='unset sudo'
EXIT[232]=0
DESC[232]='Unset sudo'
CAT[232]='unset'
BONUS[232]=0
INTER[232]=0
CMD[233]='/bin/echo'
EXIT[233]=0
DESC[233]='Absolute path echo'
CAT[233]='binaries'
BONUS[233]=0
INTER[233]=0
CMD[234]='/bin/echo Hola Que Tal'
EXIT[234]=0
DESC[234]='Absolute echo with args'
CAT[234]='binaries'
BONUS[234]=0
INTER[234]=0
CMD[235]='/bin/env'
EXIT[235]=0
DESC[235]='Absolute path env'
CAT[235]='binaries'
BONUS[235]=0
INTER[235]=0
CMD[236]='/bin/cd Desktop'
EXIT[236]=127
DESC[236]='Absolute cd doesn'\''t exist'
CAT[236]='binaries'
BONUS[236]=0
INTER[236]=0
CMD[237]='pwd'
EXIT[237]=0
DESC[237]='Print working directory'
CAT[237]='pwd'
BONUS[237]=0
INTER[237]=0
CMD[238]='pwd hola'
EXIT[238]=0
DESC[238]='Pwd with args'
CAT[238]='pwd'
BONUS[238]=0
INTER[238]=0
CMD[239]='pwd ./hola'
EXIT[239]=0
DESC[239]='Pwd with path'
CAT[239]='pwd'
BONUS[239]=0
INTER[239]=0
CMD[240]='pwd hola que tal'
EXIT[240]=0
DESC[240]='Pwd multiple args'
CAT[240]='pwd'
BONUS[240]=0
INTER[240]=0
CMD[241]='pwd -p'
EXIT[241]=2
DESC[241]='Pwd invalid option'
CAT[241]='pwd'
BONUS[241]=0
INTER[241]=0
CMD[242]='pwd --p'
EXIT[242]=2
DESC[242]='Pwd double dash option'
CAT[242]='pwd'
BONUS[242]=0
INTER[242]=0
CMD[243]='pwd ---p'
EXIT[243]=2
DESC[243]='Pwd triple dash'
CAT[243]='pwd'
BONUS[243]=0
INTER[243]=0
CMD[244]='pwd pwd pwd'
EXIT[244]=0
DESC[244]='Pwd multiple times'
CAT[244]='pwd'
BONUS[244]=0
INTER[244]=0
CMD[245]='pwd ls'
EXIT[245]=0
DESC[245]='Pwd with ls arg'
CAT[245]='pwd'
BONUS[245]=0
INTER[245]=0
CMD[246]='pwd ls env'
EXIT[246]=0
DESC[246]='Pwd multiple command args'
CAT[246]='pwd'
BONUS[246]=0
INTER[246]=0
CMD[247]='cd'
EXIT[247]=0
DESC[247]='Cd to HOME'
CAT[247]='cd'
BONUS[247]=0
INTER[247]=0
CMD[248]='cd .'
EXIT[248]=0
DESC[248]='Cd current dir'
CAT[248]='cd'
BONUS[248]=0
INTER[248]=0
CMD[249]='cd ./'
EXIT[249]=0
DESC[249]='Cd current with slash'
CAT[249]='cd'
BONUS[249]=0
INTER[249]=0
CMD[250]='cd ./././.'
EXIT[250]=0
DESC[250]='Cd multiple dots'
CAT[250]='cd'
BONUS[250]=0
INTER[250]=0
CMD[251]='cd ././././'
EXIT[251]=0
DESC[251]='Cd multiple dot slash'
CAT[251]='cd'
BONUS[251]=0
INTER[251]=0
CMD[252]='cd ..'
EXIT[252]=0
DESC[252]='Cd parent'
CAT[252]='cd'
BONUS[252]=0
INTER[252]=0
CMD[253]='cd ../'
EXIT[253]=0
DESC[253]='Cd parent with slash'
CAT[253]='cd'
BONUS[253]=0
INTER[253]=0
CMD[254]='cd ../..'
EXIT[254]=0
DESC[254]='Cd two parents'
CAT[254]='cd'
BONUS[254]=0
INTER[254]=0
CMD[255]='cd ../..'
EXIT[255]=0
DESC[255]='Cd parent and current'
CAT[255]='cd'
BONUS[255]=0
INTER[255]=0
CMD[256]='cd .././././.'
EXIT[256]=0
DESC[256]='Cd mixed traversal'
CAT[256]='cd'
BONUS[256]=0
INTER[256]=0
CMD[257]='cd srcs objs'
EXIT[257]=1
DESC[257]='Cd too many arguments'
CAT[257]='cd'
BONUS[257]=0
INTER[257]=0
CMD[258]='cd '\''srcs'\'''
EXIT[258]=0
DESC[258]='Cd single quoted'
CAT[258]='cd'
BONUS[258]=0
INTER[258]=0
CMD[259]='cd "srcs"'
EXIT[259]=0
DESC[259]='Cd double quoted'
CAT[259]='cd'
BONUS[259]=0
INTER[259]=0
CMD[260]='cd '\''/etc'\'''
EXIT[260]=0
DESC[260]='Cd absolute quoted'
CAT[260]='cd'
BONUS[260]=0
INTER[260]=0
CMD[261]='cd /e'\''tc'\'''
EXIT[261]=0
DESC[261]='Cd partial quoted'
CAT[261]='cd'
BONUS[261]=0
INTER[261]=0
CMD[262]='cd /e"tc"'
EXIT[262]=0
DESC[262]='Cd partial double quoted'
CAT[262]='cd'
BONUS[262]=0
INTER[262]=0
CMD[263]='cd sr'
EXIT[263]=1
DESC[263]='Cd non-existent'
CAT[263]='cd'
BONUS[263]=0
INTER[263]=0
CMD[264]='cd Makefile'
EXIT[264]=1
DESC[264]='Cd to file'
CAT[264]='cd'
BONUS[264]=0
INTER[264]=0
CMD[265]='cd ../minishell'
EXIT[265]=0
DESC[265]='Cd parent then dir'
CAT[265]='cd'
BONUS[265]=0
INTER[265]=0
CMD[266]='cd ../../../../../../..'
EXIT[266]=0
DESC[266]='Cd to root via parents'
CAT[266]='cd'
BONUS[266]=0
INTER[266]=0
CMD[267]='cd /'
EXIT[267]=0
DESC[267]='Cd to root'
CAT[267]='cd'
BONUS[267]=0
INTER[267]=0
CMD[268]='cd '\''/'\'''
EXIT[268]=0
DESC[268]='Cd to root quoted'
CAT[268]='cd'
BONUS[268]=0
INTER[268]=0
CMD[269]='cd ///'
EXIT[269]=0
DESC[269]='Cd triple slash'
CAT[269]='cd'
BONUS[269]=0
INTER[269]=0
CMD[270]='cd ////////'
EXIT[270]=0
DESC[270]='Cd many slashes'
CAT[270]='cd'
BONUS[270]=0
INTER[270]=0
CMD[271]='cd '\''////////'\'''
EXIT[271]=0
DESC[271]='Cd many slashes quoted'
CAT[271]='cd'
BONUS[271]=0
INTER[271]=0
CMD[272]='cd /minishell'
EXIT[272]=1
DESC[272]='Cd absolute non-existent'
CAT[272]='cd'
BONUS[272]=0
INTER[272]=0
CMD[273]='cd _'
EXIT[273]=1
DESC[273]='Cd underscore'
CAT[273]='cd'
BONUS[273]=0
INTER[273]=0
CMD[274]='cd -'
EXIT[274]=0
DESC[274]='Cd to OLDPWD'
CAT[274]='cd'
BONUS[274]=0
INTER[274]=0
CMD[275]='cd ---'
EXIT[275]=2
DESC[275]='Cd triple dash'
CAT[275]='cd'
BONUS[275]=0
INTER[275]=0
CMD[276]='cd $HOME'
EXIT[276]=0
DESC[276]='Cd HOME variable'
CAT[276]='cd'
BONUS[276]=0
INTER[276]=0
CMD[277]='cd $HOME $HOME'
EXIT[277]=1
DESC[277]='Cd HOME twice'
CAT[277]='cd'
BONUS[277]=0
INTER[277]=0
CMD[278]='cd $HOME/42_works'
EXIT[278]=0
DESC[278]='Cd HOME subdir'
CAT[278]='cd'
BONUS[278]=0
INTER[278]=0
CMD[279]='cd "$PWD/srcs"'
EXIT[279]=0
DESC[279]='Cd PWD quoted'
CAT[279]='cd'
BONUS[279]=0
INTER[279]=0
CMD[280]='cd '\''$PWD/srcs'\'''
EXIT[280]=1
DESC[280]='Cd PWD single quoted'
CAT[280]='cd'
BONUS[280]=0
INTER[280]=0
CMD[281]='cd ~'
EXIT[281]=0
DESC[281]='Cd tilde'
CAT[281]='cd'
BONUS[281]=1
INTER[281]=0
CMD[282]='cd ~/'
EXIT[282]=0
DESC[282]='Cd tilde slash'
CAT[282]='cd'
BONUS[282]=1
INTER[282]=0
CMD[283]='./Makefile'
EXIT[283]=126
DESC[283]='Execute non-executable'
CAT[283]='bastards'
BONUS[283]=0
INTER[283]=0
CMD[284]='ls hola'
EXIT[284]=2
DESC[284]='Ls non-existent'
CAT[284]='bastards'
BONUS[284]=0
INTER[284]=0
CMD[285]='./minishell'
EXIT[285]=0
DESC[285]='Execute minishell'
CAT[285]='bastards'
BONUS[285]=0
INTER[285]=0
CMD[286]='env|"wc" -l'
EXIT[286]=0
DESC[286]='Env piped to wc'
CAT[286]='bastards'
BONUS[286]=0
INTER[286]=0
CMD[287]='env|"wc "-l'
EXIT[287]=127
DESC[287]='Env piped malformed'
CAT[287]='bastards'
BONUS[287]=0
INTER[287]=0
CMD[288]='expr 1 + 1'
EXIT[288]=0
DESC[288]='Expr addition'
CAT[288]='bastards'
BONUS[288]=0
INTER[288]=0
CMD[289]='expr $? + $?'
EXIT[289]=0
DESC[289]='Expr with exit codes'
CAT[289]='bastards'
BONUS[289]=0
INTER[289]=0
CMD[290]='exit'
EXIT[290]=0
DESC[290]='Exit simple'
CAT[290]='exit'
BONUS[290]=0
INTER[290]=0
CMD[291]='exit exit'
EXIT[291]=2
DESC[291]='Exit with non-numeric'
CAT[291]='exit'
BONUS[291]=0
INTER[291]=0
CMD[292]='exit hola'
EXIT[292]=2
DESC[292]='Exit with string'
CAT[292]='exit'
BONUS[292]=0
INTER[292]=0
CMD[293]='exit hola que tal'
EXIT[293]=2
DESC[293]='Exit with multiple strings'
CAT[293]='exit'
BONUS[293]=0
INTER[293]=0
CMD[294]='exit 42'
EXIT[294]=42
DESC[294]='Exit with code'
CAT[294]='exit'
BONUS[294]=0
INTER[294]=0
CMD[295]='exit 000042'
EXIT[295]=42
DESC[295]='Exit with leading zeros'
CAT[295]='exit'
BONUS[295]=0
INTER[295]=0
CMD[296]='exit 666'
EXIT[296]=154
DESC[296]='Exit modulo 256'
CAT[296]='exit'
BONUS[296]=0
INTER[296]=0
CMD[297]='exit 666 666'
EXIT[297]=1
DESC[297]='Exit too many args'
CAT[297]='exit'
BONUS[297]=0
INTER[297]=0
CMD[298]='exit -666 666'
EXIT[298]=1
DESC[298]='Exit negative too many'
CAT[298]='exit'
BONUS[298]=0
INTER[298]=0
CMD[299]='exit hola 666'
EXIT[299]=2
DESC[299]='Exit non-numeric first'
CAT[299]='exit'
BONUS[299]=0
INTER[299]=0
CMD[300]='exit 666 666 666 666'
EXIT[300]=1
DESC[300]='Exit many args'
CAT[300]='exit'
BONUS[300]=0
INTER[300]=0
CMD[301]='exit 666 hola 666'
EXIT[301]=1
DESC[301]='Exit numeric then string'
CAT[301]='exit'
BONUS[301]=0
INTER[301]=0
CMD[302]='exit hola 666 666'
EXIT[302]=2
DESC[302]='Exit string then numbers'
CAT[302]='exit'
BONUS[302]=0
INTER[302]=0
CMD[303]='exit 259'
EXIT[303]=3
DESC[303]='Exit 259 mod 256'
CAT[303]='exit'
BONUS[303]=0
INTER[303]=0
CMD[304]='exit -4'
EXIT[304]=252
DESC[304]='Exit negative small'
CAT[304]='exit'
BONUS[304]=0
INTER[304]=0
CMD[305]='exit -42'
EXIT[305]=214
DESC[305]='Exit negative 42'
CAT[305]='exit'
BONUS[305]=0
INTER[305]=0
CMD[306]='exit -0000042'
EXIT[306]=214
DESC[306]='Exit negative with zeros'
CAT[306]='exit'
BONUS[306]=0
INTER[306]=0
CMD[307]='exit -259'
EXIT[307]=253
DESC[307]='Exit negative 259'
CAT[307]='exit'
BONUS[307]=0
INTER[307]=0
CMD[308]='exit -666'
EXIT[308]=102
DESC[308]='Exit negative 666'
CAT[308]='exit'
BONUS[308]=0
INTER[308]=0
CMD[309]='exit +666'
EXIT[309]=154
DESC[309]='Exit plus 666'
CAT[309]='exit'
BONUS[309]=0
INTER[309]=0
CMD[310]='exit 0'
EXIT[310]=0
DESC[310]='Exit zero'
CAT[310]='exit'
BONUS[310]=0
INTER[310]=0
CMD[311]='exit +0'
EXIT[311]=0
DESC[311]='Exit plus zero'
CAT[311]='exit'
BONUS[311]=0
INTER[311]=0
CMD[312]='exit -0'
EXIT[312]=0
DESC[312]='Exit minus zero'
CAT[312]='exit'
BONUS[312]=0
INTER[312]=0
CMD[313]='exit +42'
EXIT[313]=42
DESC[313]='Exit plus 42'
CAT[313]='exit'
BONUS[313]=0
INTER[313]=0
CMD[314]='exit -69 -96'
EXIT[314]=1
DESC[314]='Exit two negatives'
CAT[314]='exit'
BONUS[314]=0
INTER[314]=0
CMD[315]='exit --666'
EXIT[315]=2
DESC[315]='Exit double dash'
CAT[315]='exit'
BONUS[315]=0
INTER[315]=0
CMD[316]='exit ++++666'
EXIT[316]=2
DESC[316]='Exit many plus'
CAT[316]='exit'
BONUS[316]=0
INTER[316]=0
CMD[317]='exit ++++++0'
EXIT[317]=2
DESC[317]='Exit many plus zero'
CAT[317]='exit'
BONUS[317]=0
INTER[317]=0
CMD[318]='exit ------0'
EXIT[318]=2
DESC[318]='Exit many minus zero'
CAT[318]='exit'
BONUS[318]=0
INTER[318]=0
CMD[319]='exit "666"'
EXIT[319]=154
DESC[319]='Exit quoted number'
CAT[319]='exit'
BONUS[319]=0
INTER[319]=0
CMD[320]='exit '\''666'\'''
EXIT[320]=154
DESC[320]='Exit single quoted number'
CAT[320]='exit'
BONUS[320]=0
INTER[320]=0
CMD[321]='exit '\''-666'\'''
EXIT[321]=102
DESC[321]='Exit quoted negative'
CAT[321]='exit'
BONUS[321]=0
INTER[321]=0
CMD[322]='exit '\''+666'\'''
EXIT[322]=154
DESC[322]='Exit quoted plus'
CAT[322]='exit'
BONUS[322]=0
INTER[322]=0
CMD[323]='exit '\''----666'\'''
EXIT[323]=2
DESC[323]='Exit quoted many dash'
CAT[323]='exit'
BONUS[323]=0
INTER[323]=0
CMD[324]='exit '\''++++666'\'''
EXIT[324]=2
DESC[324]='Exit quoted many plus'
CAT[324]='exit'
BONUS[324]=0
INTER[324]=0
CMD[325]='exit '\''6'\''66'
EXIT[325]=154
DESC[325]='Exit split quotes'
CAT[325]='exit'
BONUS[325]=0
INTER[325]=0
CMD[326]='exit '\''2'\''66'\''32'\'''
EXIT[326]=8
DESC[326]='Exit multiple splits'
CAT[326]='exit'
BONUS[326]=0
INTER[326]=0
CMD[327]='exit "'\''666'\''"'
EXIT[327]=2
DESC[327]='Exit nested quotes'
CAT[327]='exit'
BONUS[327]=0
INTER[327]=0
CMD[328]='exit '\''"666"'\'''
EXIT[328]=2
DESC[328]='Exit nested double in single'
CAT[328]='exit'
BONUS[328]=0
INTER[328]=0
CMD[329]='exit '\''666'\''"666"666'
EXIT[329]=170
DESC[329]='Exit complex quotes'
CAT[329]='exit'
BONUS[329]=0
INTER[329]=0
CMD[330]='exit +'\''666'\''"666"666'
EXIT[330]=170
DESC[330]='Exit plus complex'
CAT[330]='exit'
BONUS[330]=0
INTER[330]=0
CMD[331]='exit -'\''666'\''"666"666'
EXIT[331]=86
DESC[331]='Exit minus complex'
CAT[331]='exit'
BONUS[331]=0
INTER[331]=0
CMD[332]='exit 9223372036854775807'
EXIT[332]=255
DESC[332]='Exit LONG_MAX'
CAT[332]='exit'
BONUS[332]=0
INTER[332]=0
CMD[333]='exit 9223372036854775808'
EXIT[333]=2
DESC[333]='Exit overflow'
CAT[333]='exit'
BONUS[333]=0
INTER[333]=0
CMD[334]='exit -9223372036854775808'
EXIT[334]=0
DESC[334]='Exit LONG_MIN'
CAT[334]='exit'
BONUS[334]=0
INTER[334]=0
CMD[335]='exit -9223372036854775809'
EXIT[335]=2
DESC[335]='Exit underflow'
CAT[335]='exit'
BONUS[335]=0
INTER[335]=0
CMD[336]='cat | cat | cat | ls'
EXIT[336]=0
DESC[336]='Multiple cats and ls'
CAT[336]='pipes'
BONUS[336]=0
INTER[336]=0
CMD[337]='ls | exit'
EXIT[337]=0
DESC[337]='Ls pipe exit'
CAT[337]='pipes'
BONUS[337]=0
INTER[337]=0
CMD[338]='ls | exit 42'
EXIT[338]=42
DESC[338]='Ls pipe exit 42'
CAT[338]='pipes'
BONUS[338]=0
INTER[338]=0
CMD[339]='exit | ls'
EXIT[339]=0
DESC[339]='Exit pipe ls'
CAT[339]='pipes'
BONUS[339]=0
INTER[339]=0
CMD[340]='echo | echo'
EXIT[340]=0
DESC[340]='Echo pipe echo'
CAT[340]='pipes'
BONUS[340]=0
INTER[340]=0
CMD[341]='echo hola | echo que tal'
EXIT[341]=0
DESC[341]='Echo pipe echo args'
CAT[341]='pipes'
BONUS[341]=0
INTER[341]=0
CMD[342]='pwd | echo hola'
EXIT[342]=0
DESC[342]='Pwd pipe echo'
CAT[342]='pipes'
BONUS[342]=0
INTER[342]=0
CMD[343]='env | echo hola'
EXIT[343]=0
DESC[343]='Env pipe echo'
CAT[343]='pipes'
BONUS[343]=0
INTER[343]=0
CMD[344]='echo oui | cat -e'
EXIT[344]=0
DESC[344]='Echo pipe cat'
CAT[344]='pipes'
BONUS[344]=0
INTER[344]=0
CMD[345]='echo oui | echo non | echo hola | grep oui'
EXIT[345]=0
DESC[345]='Multiple pipes grep oui'
CAT[345]='pipes'
BONUS[345]=0
INTER[345]=0
CMD[346]='echo oui | echo non | echo hola | grep non'
EXIT[346]=0
DESC[346]='Multiple pipes grep non'
CAT[346]='pipes'
BONUS[346]=0
INTER[346]=0
CMD[347]='echo oui | echo non | echo hola | grep hola'
EXIT[347]=0
DESC[347]='Multiple pipes grep hola'
CAT[347]='pipes'
BONUS[347]=0
INTER[347]=0
CMD[348]='echo hola | cat -e | cat -e | cat -e'
EXIT[348]=0
DESC[348]='Echo multiple cat -e'
CAT[348]='pipes'
BONUS[348]=0
INTER[348]=0
CMD[349]='cd .. | echo "hola"'
EXIT[349]=0
DESC[349]='Cd pipe echo'
CAT[349]='pipes'
BONUS[349]=0
INTER[349]=0
CMD[350]='cd / | echo "hola"'
EXIT[350]=0
DESC[350]='Cd root pipe echo'
CAT[350]='pipes'
BONUS[350]=0
INTER[350]=0
CMD[351]='cd .. | pwd'
EXIT[351]=0
DESC[351]='Cd pipe pwd'
CAT[351]='pipes'
BONUS[351]=0
INTER[351]=0
CMD[352]='ifconfig | grep ":"'
EXIT[352]=0
DESC[352]='Ifconfig pipe grep'
CAT[352]='pipes'
BONUS[352]=0
INTER[352]=0
CMD[353]='ifconfig | grep hola'
EXIT[353]=1
DESC[353]='Ifconfig grep non-match'
CAT[353]='pipes'
BONUS[353]=0
INTER[353]=0
CMD[354]='whoami | grep $USER'
EXIT[354]=0
DESC[354]='Whoami pipe grep USER'
CAT[354]='pipes'
BONUS[354]=0
INTER[354]=0
CMD[355]='ls | hola'
EXIT[355]=127
DESC[355]='Ls pipe non-existent'
CAT[355]='pipes'
BONUS[355]=0
INTER[355]=0
CMD[356]='ls | ls hola'
EXIT[356]=2
DESC[356]='Ls pipe ls error'
CAT[356]='pipes'
BONUS[356]=0
INTER[356]=0
CMD[357]='ls | ls | hola'
EXIT[357]=127
DESC[357]='Double ls pipe error'
CAT[357]='pipes'
BONUS[357]=0
INTER[357]=0
CMD[358]='ls | hola | ls'
EXIT[358]=0
DESC[358]='Ls error ls'
CAT[358]='pipes'
BONUS[358]=0
INTER[358]=0
CMD[359]='ls | ls | hola | rev'
EXIT[359]=0
DESC[359]='Multiple pipe with error'
CAT[359]='pipes'
BONUS[359]=0
INTER[359]=0
CMD[360]='ls | ls | echo hola | rev'
EXIT[360]=0
DESC[360]='Multiple pipe echo rev'
CAT[360]='pipes'
BONUS[360]=0
INTER[360]=0
CMD[361]='ls -la | grep "."'
EXIT[361]=0
DESC[361]='Ls pipe grep dot'
CAT[361]='pipes'
BONUS[361]=0
INTER[361]=0
CMD[362]='ls -la | grep "'\''.'\''"'
EXIT[362]=0
DESC[362]='Ls pipe grep quoted dot'
CAT[362]='pipes'
BONUS[362]=0
INTER[362]=0
CMD[363]='echo test.c | cat -e| cat -e| cat -e| cat -e| cat -e| cat -e| cat -e| cat -e|cat -e|cat -e|cat -e'
EXIT[363]=0
DESC[363]='Many cat -e pipes'
CAT[363]='pipes'
BONUS[363]=0
INTER[363]=0
CMD[364]='echo hola | cat | cat | cat | cat | cat | grep hola'
EXIT[364]=0
DESC[364]='Many cats grep'
CAT[364]='pipes'
BONUS[364]=0
INTER[364]=0
CMD[365]='echo hola | cat'
EXIT[365]=0
DESC[365]='Echo pipe cat simple'
CAT[365]='pipes'
BONUS[365]=0
INTER[365]=0
CMD[366]='echo hola| cat'
EXIT[366]=0
DESC[366]='Echo pipe no space'
CAT[366]='pipes'
BONUS[366]=0
INTER[366]=0
CMD[367]='echo hola |cat'
EXIT[367]=0
DESC[367]='Echo pipe space after'
CAT[367]='pipes'
BONUS[367]=0
INTER[367]=0
CMD[368]='echo hola|cat'
EXIT[368]=0
DESC[368]='Echo pipe no spaces'
CAT[368]='pipes'
BONUS[368]=0
INTER[368]=0
CMD[369]='echo hola ||| cat'
EXIT[369]=2
DESC[369]='Triple pipe'
CAT[369]='pipes'
BONUS[369]=0
INTER[369]=0
CMD[370]='ech|o hola | cat'
EXIT[370]=127
DESC[370]='Pipe in command'
CAT[370]='pipes'
BONUS[370]=0
INTER[370]=0
CMD[371]='cat Makefile | cat -e | cat -e'
EXIT[371]=0
DESC[371]='Cat file double cat -e'
CAT[371]='pipes'
BONUS[371]=0
INTER[371]=0
CMD[372]='cat Makefile | grep srcs | cat -e'
EXIT[372]=0
DESC[372]='Cat grep cat'
CAT[372]='pipes'
BONUS[372]=0
INTER[372]=0
CMD[373]='cat Makefile | grep srcs | grep srcs | cat -e'
EXIT[373]=0
DESC[373]='Cat double grep'
CAT[373]='pipes'
BONUS[373]=0
INTER[373]=0
CMD[374]='cat Makefile | grep pr | head -n 5 | cd file_not_exist'
EXIT[374]=1
DESC[374]='Pipe to cd error'
CAT[374]='pipes'
BONUS[374]=0
INTER[374]=0
CMD[375]='cat Makefile | grep pr | head -n 5 | hello'
EXIT[375]=127
DESC[375]='Pipe to non-existent'
CAT[375]='pipes'
BONUS[375]=0
INTER[375]=0
CMD[376]='export HOLA=bonjour | cat -e | cat -e'
EXIT[376]=0
DESC[376]='Export pipe cats'
CAT[376]='pipes'
BONUS[376]=0
INTER[376]=0
CMD[377]='unset HOLA | cat -e'
EXIT[377]=0
DESC[377]='Unset pipe cat'
CAT[377]='pipes'
BONUS[377]=0
INTER[377]=0
CMD[378]='export | echo hola'
EXIT[378]=0
DESC[378]='Export pipe echo'
CAT[378]='pipes'
BONUS[378]=0
INTER[378]=0
CMD[379]='sleep 3 | sleep 3'
EXIT[379]=0
DESC[379]='Sleep pipe sleep'
CAT[379]='pipes'
BONUS[379]=0
INTER[379]=0
CMD[380]='sleep 3 | exit'
EXIT[380]=0
DESC[380]='Sleep pipe exit'
CAT[380]='pipes'
BONUS[380]=0
INTER[380]=0
CMD[381]='exit | sleep 3'
EXIT[381]=0
DESC[381]='Exit pipe sleep'
CAT[381]='pipes'
BONUS[381]=0
INTER[381]=0
CMD[382]='echo hola > bonjour'
EXIT[382]=0
DESC[382]='Redirect out simple'
CAT[382]='redirections'
BONUS[382]=0
INTER[382]=0
CMD[383]='echo que tal >> bonjour'
EXIT[383]=0
DESC[383]='Redirect append'
CAT[383]='redirections'
BONUS[383]=0
INTER[383]=0
CMD[384]='cat < bonjour'
EXIT[384]=0
DESC[384]='Redirect in simple'
CAT[384]='redirections'
BONUS[384]=0
INTER[384]=0
CMD[385]='pwd>bonjour'
EXIT[385]=0
DESC[385]='Redirect no space'
CAT[385]='redirections'
BONUS[385]=0
INTER[385]=0
CMD[386]='pwd >                     bonjour'
EXIT[386]=0
DESC[386]='Redirect many spaces'
CAT[386]='redirections'
BONUS[386]=0
INTER[386]=0
CMD[387]='echo hola > > bonjour'
EXIT[387]=2
DESC[387]='Double redirect space'
CAT[387]='redirections'
BONUS[387]=0
INTER[387]=0
CMD[388]='echo hola < < bonjour'
EXIT[388]=2
DESC[388]='Double redirect in space'
CAT[388]='redirections'
BONUS[388]=0
INTER[388]=0
CMD[389]='echo hola >>> bonjour'
EXIT[389]=2
DESC[389]='Triple redirect'
CAT[389]='redirections'
BONUS[389]=0
INTER[389]=0
CMD[390]='> bonjour echo hola'
EXIT[390]=0
DESC[390]='Redirect before command'
CAT[390]='redirections'
BONUS[390]=0
INTER[390]=0
CMD[391]='> bonjour | echo hola'
EXIT[391]=0
DESC[391]='Redirect pipe echo'
CAT[391]='redirections'
BONUS[391]=0
INTER[391]=0
CMD[392]='prout hola > bonjour'
EXIT[392]=127
DESC[392]='Non-existent redirect'
CAT[392]='redirections'
BONUS[392]=0
INTER[392]=0
CMD[393]='echo hola > hello >> hello >> hello'
EXIT[393]=0
DESC[393]='Multiple redirects'
CAT[393]='redirections'
BONUS[393]=0
INTER[393]=0
CMD[394]='echo hola >> hello >> hello > hello'
EXIT[394]=0
DESC[394]='Mixed redirect order'
CAT[394]='redirections'
BONUS[394]=0
INTER[394]=0
CMD[395]='> pwd'
EXIT[395]=0
DESC[395]='Create file pwd'
CAT[395]='redirections'
BONUS[395]=0
INTER[395]=0
CMD[396]='< pwd'
EXIT[396]=1
DESC[396]='Read non-existent pwd'
CAT[396]='redirections'
BONUS[396]=0
INTER[396]=0
CMD[397]='cat <pwd'
EXIT[397]=1
DESC[397]='Cat non-existent'
CAT[397]='redirections'
BONUS[397]=0
INTER[397]=0
CMD[398]='cat >>'
EXIT[398]=2
DESC[398]='Cat append no file'
CAT[398]='redirections'
BONUS[398]=0
INTER[398]=0
CMD[399]='cat >>>'
EXIT[399]=2
DESC[399]='Cat triple redirect'
CAT[399]='redirections'
BONUS[399]=0
INTER[399]=0
CMD[400]='cat >> <<'
EXIT[400]=2
DESC[400]='Cat append heredoc'
CAT[400]='redirections'
BONUS[400]=0
INTER[400]=0
CMD[401]='cat >> > >> << >>'
EXIT[401]=2
DESC[401]='Cat mixed operators'
CAT[401]='redirections'
BONUS[401]=0
INTER[401]=0
CMD[402]='cat < ls'
EXIT[402]=1
DESC[402]='Cat redirect non-existent'
CAT[402]='redirections'
BONUS[402]=0
INTER[402]=0
CMD[403]='cat < ls > ls'
EXIT[403]=1
DESC[403]='Cat redirect both'
CAT[403]='redirections'
BONUS[403]=0
INTER[403]=0
CMD[404]='cat > ls1 < ls2'
EXIT[404]=1
DESC[404]='Cat out then in error'
CAT[404]='redirections'
BONUS[404]=0
INTER[404]=0
CMD[405]='>>hola'
EXIT[405]=0
DESC[405]='Append alone'
CAT[405]='redirections'
BONUS[405]=0
INTER[405]=0
CMD[406]='echo hola >bonjour'
EXIT[406]=0
DESC[406]='Echo redirect no space'
CAT[406]='redirections'
BONUS[406]=0
INTER[406]=0
CMD[407]='cat <bonjour'
EXIT[407]=0
DESC[407]='Cat in no space'
CAT[407]='redirections'
BONUS[407]=0
INTER[407]=0
CMD[408]='echo hola>bonjour'
EXIT[408]=0
DESC[408]='Echo redirect joined'
CAT[408]='redirections'
BONUS[408]=0
INTER[408]=0
CMD[409]='cat<bonjour'
EXIT[409]=0
DESC[409]='Cat in joined'
CAT[409]='redirections'
BONUS[409]=0
INTER[409]=0
CMD[410]='echo hola> bonjour'
EXIT[410]=0
DESC[410]='Echo redirect space after'
CAT[410]='redirections'
BONUS[410]=0
INTER[410]=0
CMD[411]='cat< bonjour'
EXIT[411]=0
DESC[411]='Cat in space after'
CAT[411]='redirections'
BONUS[411]=0
INTER[411]=0
CMD[412]='echo hola               >bonjour'
EXIT[412]=0
DESC[412]='Echo many spaces redirect'
CAT[412]='redirections'
BONUS[412]=0
INTER[412]=0
CMD[413]='cat<                     bonjour'
EXIT[413]=0
DESC[413]='Cat many spaces in'
CAT[413]='redirections'
BONUS[413]=0
INTER[413]=0
CMD[414]='echo hola          >     bonjour'
EXIT[414]=0
DESC[414]='Echo spaces around redirect'
CAT[414]='redirections'
BONUS[414]=0
INTER[414]=0
CMD[415]='cat            <         bonjour'
EXIT[415]=0
DESC[415]='Cat spaces around in'
CAT[415]='redirections'
BONUS[415]=0
INTER[415]=0
CMD[416]='echo hola > srcs/bonjour'
EXIT[416]=0
DESC[416]='Echo redirect subdir'
CAT[416]='redirections'
BONUS[416]=0
INTER[416]=0
CMD[417]='cat < srcs/bonjour'
EXIT[417]=0
DESC[417]='Cat in subdir'
CAT[417]='redirections'
BONUS[417]=0
INTER[417]=0
CMD[418]='echo hola >srcs/bonjour'
EXIT[418]=0
DESC[418]='Echo redirect subdir no space'
CAT[418]='redirections'
BONUS[418]=0
INTER[418]=0
CMD[419]='cat <srcs/bonjour'
EXIT[419]=0
DESC[419]='Cat in subdir no space'
CAT[419]='redirections'
BONUS[419]=0
INTER[419]=0
CMD[420]='e'\''c'\''""h""o hola > bonjour'
EXIT[420]=0
DESC[420]='Quoted command redirect'
CAT[420]='redirections'
BONUS[420]=0
INTER[420]=0
CMD[421]='cat '\''bo'\''""n""jour'
EXIT[421]=0
DESC[421]='Cat quoted filename'
CAT[421]='redirections'
BONUS[421]=0
INTER[421]=0
CMD[422]='echo hola > bonjour hey'
EXIT[422]=0
DESC[422]='Echo redirect with extra arg'
CAT[422]='redirections'
BONUS[422]=0
INTER[422]=0
CMD[423]='<a cat <b <c'
EXIT[423]=0
DESC[423]='Multiple input redirects'
CAT[423]='redirections'
BONUS[423]=0
INTER[423]=0
CMD[424]='>a ls >b >>c >d'
EXIT[424]=0
DESC[424]='Multiple output redirects'
CAT[424]='redirections'
BONUS[424]=0
INTER[424]=0
CMD[425]='echo hola > a > b > c'
EXIT[425]=0
DESC[425]='Echo multiple outs'
CAT[425]='redirections'
BONUS[425]=0
INTER[425]=0
CMD[426]='<a'
EXIT[426]=0
DESC[426]='Input redirect alone'
CAT[426]='redirections'
BONUS[426]=0
INTER[426]=0
CMD[427]='>d cat <a >>e'
EXIT[427]=0
DESC[427]='Mixed redirects order'
CAT[427]='redirections'
BONUS[427]=0
INTER[427]=0
CMD[428]='< a > b cat > hey >> d'
EXIT[428]=0
DESC[428]='Complex redirect order'
CAT[428]='redirections'
BONUS[428]=0
INTER[428]=0
CMD[429]='echo hola <bonjour <hello'
EXIT[429]=0
DESC[429]='Echo double input'
CAT[429]='redirections'
BONUS[429]=0
INTER[429]=0
CMD[430]='echo <bonjour <hello'
EXIT[430]=0
DESC[430]='Echo inputs only'
CAT[430]='redirections'
BONUS[430]=0
INTER[430]=0
CMD[431]='>bonjour >hello <prout'
EXIT[431]=1
DESC[431]='Multiple out with error in'
CAT[431]='redirections'
BONUS[431]=0
INTER[431]=0
CMD[432]='>bonjour <prout >hello'
EXIT[432]=1
DESC[432]='Out error out'
CAT[432]='redirections'
BONUS[432]=0
INTER[432]=0
CMD[433]='<bonjour cat | wc > bonjour'
EXIT[433]=0
DESC[433]='In pipe out same file'
CAT[433]='redirections'
BONUS[433]=0
INTER[433]=0
CMD[434]='cat << hola
$HOME
hola
'
EXIT[434]=0
DESC[434]='Heredoc with variable'
CAT[434]='heredoc'
BONUS[434]=0
INTER[434]=1
CMD[435]='cat << '\''hola'\''
$HOME
hola
'
EXIT[435]=0
DESC[435]='Heredoc single quoted delimiter'
CAT[435]='heredoc'
BONUS[435]=0
INTER[435]=1
CMD[436]='cat << "hola"
$HOME
hola
'
EXIT[436]=0
DESC[436]='Heredoc double quoted delimiter'
CAT[436]='heredoc'
BONUS[436]=0
INTER[436]=1
CMD[437]='cat << ho"la"
$HOME
hola
'
EXIT[437]=0
DESC[437]='Heredoc partial quoted delimiter'
CAT[437]='heredoc'
BONUS[437]=0
INTER[437]=1
CMD[438]='cat << $HOME
prout
/home/vietdu91
'
EXIT[438]=0
DESC[438]='Heredoc variable delimiter'
CAT[438]='heredoc'
BONUS[438]=0
INTER[438]=1
CMD[439]='cat << hola > bonjour
prout
hola
'
EXIT[439]=0
DESC[439]='Heredoc with redirect'
CAT[439]='heredoc'
BONUS[439]=0
INTER[439]=1
CMD[440]='cat << hola | rev
prout
hola
'
EXIT[440]=0
DESC[440]='Heredoc piped'
CAT[440]='heredoc'
BONUS[440]=0
INTER[440]=1
CMD[441]='<< hola
chola
hola
'
EXIT[441]=0
DESC[441]='Heredoc alone'
CAT[441]='heredoc'
BONUS[441]=0
INTER[441]=1
CMD[442]='<<hola

hola
'
EXIT[442]=0
DESC[442]='Heredoc no space'
CAT[442]='heredoc'
BONUS[442]=0
INTER[442]=1
CMD[443]='cat <<'
EXIT[443]=2
DESC[443]='Heredoc no delimiter'
CAT[443]='heredoc'
BONUS[443]=0
INTER[443]=0
CMD[444]='cat << prout << lol << koala
prout
lol
koala
'
EXIT[444]=0
DESC[444]='Multiple heredocs'
CAT[444]='heredoc'
BONUS[444]=0
INTER[444]=1
CMD[445]='prout << lol << cat << koala
prout
lol
cat
koala
'
EXIT[445]=127
DESC[445]='Non-existent with heredocs'
CAT[445]='heredoc'
BONUS[445]=0
INTER[445]=1
CMD[446]='<< $hola
$hola
'
EXIT[446]=0
DESC[446]='Heredoc empty var delimiter'
CAT[446]='heredoc'
BONUS[446]=0
INTER[446]=1
CMD[447]='<< $"hola"$"b"
holab
'
EXIT[447]=0
DESC[447]='Heredoc complex delimiter'
CAT[447]='heredoc'
BONUS[447]=0
INTER[447]=1
CMD[448]='echo hola <<< bonjour'
EXIT[448]=0
DESC[448]='Here-string'
CAT[448]='heredoc'
BONUS[448]=1
INTER[448]=0
CMD[449]='echo hola <<<< bonjour'
EXIT[449]=2
DESC[449]='Four less-than'
CAT[449]='heredoc'
BONUS[449]=0
INTER[449]=0
CMD[450]='echo hola <<<<< bonjour'
EXIT[450]=2
DESC[450]='Five less-than'
CAT[450]='heredoc'
BONUS[450]=0
INTER[450]=0
CMD[451]='pwd && ls'
EXIT[451]=0
DESC[451]='And operator success'
CAT[451]='logical'
BONUS[451]=1
INTER[451]=0
CMD[452]='pwd || ls'
EXIT[452]=0
DESC[452]='Or operator first success'
CAT[452]='logical'
BONUS[452]=1
INTER[452]=0
CMD[453]='echo hola || echo bonjour'
EXIT[453]=0
DESC[453]='Or with echo'
CAT[453]='logical'
BONUS[453]=1
INTER[453]=0
CMD[454]='echo hola && echo bonjour'
EXIT[454]=0
DESC[454]='And with echo'
CAT[454]='logical'
BONUS[454]=1
INTER[454]=0
CMD[455]='echo bonjour || echo hola'
EXIT[455]=0
DESC[455]='Or first succeeds'
CAT[455]='logical'
BONUS[455]=1
INTER[455]=0
CMD[456]='echo bonjour && echo hola'
EXIT[456]=0
DESC[456]='And both succeed'
CAT[456]='logical'
BONUS[456]=1
INTER[456]=0
CMD[457]='echo -n bonjour && echo -n hola'
EXIT[457]=0
DESC[457]='And with -n flags'
CAT[457]='logical'
BONUS[457]=1
INTER[457]=0
CMD[458]='pwd && ls && echo hola'
EXIT[458]=0
DESC[458]='Multiple and operators'
CAT[458]='logical'
BONUS[458]=1
INTER[458]=0
CMD[459]='pwd || ls && echo hola'
EXIT[459]=0
DESC[459]='Or and mix'
CAT[459]='logical'
BONUS[459]=1
INTER[459]=0
CMD[460]='pwd && ls || echo hola'
EXIT[460]=0
DESC[460]='And or mix'
CAT[460]='logical'
BONUS[460]=1
INTER[460]=0
CMD[461]='pwd || ls || echo hola'
EXIT[461]=0
DESC[461]='Multiple or operators'
CAT[461]='logical'
BONUS[461]=1
INTER[461]=0
CMD[462]='ls || export ""'
EXIT[462]=0
DESC[462]='Or with export error'
CAT[462]='logical'
BONUS[462]=1
INTER[462]=0
CMD[463]='export "" || ls'
EXIT[463]=0
DESC[463]='Export error or ls'
CAT[463]='logical'
BONUS[463]=1
INTER[463]=0
CMD[464]='ls && export ""'
EXIT[464]=1
DESC[464]='And with export error'
CAT[464]='logical'
BONUS[464]=1
INTER[464]=0
CMD[465]='export "" && ls'
EXIT[465]=1
DESC[465]='Export error and ls'
CAT[465]='logical'
BONUS[465]=1
INTER[465]=0
CMD[466]='cat | echo || ls'
EXIT[466]=0
DESC[466]='Pipe with or'
CAT[466]='logical'
BONUS[466]=1
INTER[466]=0
CMD[467]='cat | echo && ls'
EXIT[467]=0
DESC[467]='Pipe with and'
CAT[467]='logical'
BONUS[467]=1
INTER[467]=0
CMD[468]='ls || cat | echo'
EXIT[468]=0
DESC[468]='Or then pipe'
CAT[468]='logical'
BONUS[468]=1
INTER[468]=0
CMD[469]='ls && cat | echo'
EXIT[469]=0
DESC[469]='And then pipe'
CAT[469]='logical'
BONUS[469]=1
INTER[469]=0
CMD[470]='export "" && unset ""'
EXIT[470]=1
DESC[470]='Export error and unset'
CAT[470]='logical'
BONUS[470]=1
INTER[470]=0
CMD[471]='(ls)'
EXIT[471]=0
DESC[471]='Simple subshell'
CAT[471]='parentheses'
BONUS[471]=1
INTER[471]=0
CMD[472]='( ( ls ) )'
EXIT[472]=0
DESC[472]='Nested subshells'
CAT[472]='parentheses'
BONUS[472]=1
INTER[472]=0
CMD[473]='( ( ) ls )'
EXIT[473]=2
DESC[473]='Empty subshell with command'
CAT[473]='parentheses'
BONUS[473]=1
INTER[473]=0
CMD[474]='ls && (ls)'
EXIT[474]=0
DESC[474]='And with subshell'
CAT[474]='parentheses'
BONUS[474]=1
INTER[474]=0
CMD[475]='(ls && pwd)'
EXIT[475]=0
DESC[475]='Subshell with and'
CAT[475]='parentheses'
BONUS[475]=1
INTER[475]=0
CMD[476]='( ( ls&&pwd ) )'
EXIT[476]=0
DESC[476]='Nested subshell and'
CAT[476]='parentheses'
BONUS[476]=1
INTER[476]=0
CMD[477]='( ( ls ) &&pwd )'
EXIT[477]=0
DESC[477]='Nested mixed spacing'
CAT[477]='parentheses'
BONUS[477]=1
INTER[477]=0
CMD[478]='(ls && ( ( pwd ) ) )'
EXIT[478]=0
DESC[478]='Complex nesting'
CAT[478]='parentheses'
BONUS[478]=1
INTER[478]=0
CMD[479]='(ls && pwd) > hola'
EXIT[479]=0
DESC[479]='Subshell redirect'
CAT[479]='parentheses'
BONUS[479]=1
INTER[479]=0
CMD[480]='> hola ls && pwd'
EXIT[480]=0
DESC[480]='Redirect and without parens'
CAT[480]='parentheses'
BONUS[480]=1
INTER[480]=0
CMD[481]='> hola (ls && pwd)'
EXIT[481]=2
DESC[481]='Redirect before subshell'
CAT[481]='parentheses'
BONUS[481]=1
INTER[481]=0
CMD[482]='(> pwd)'
EXIT[482]=0
DESC[482]='Redirect in subshell'
CAT[482]='parentheses'
BONUS[482]=1
INTER[482]=0
CMD[483]='(< pwd)'
EXIT[483]=0
DESC[483]='Input redirect in subshell'
CAT[483]='parentheses'
BONUS[483]=1
INTER[483]=0
CMD[484]='( ( ( ( ( pwd) ) ) ) )'
EXIT[484]=0
DESC[484]='Many nested subshells'
CAT[484]='parentheses'
BONUS[484]=1
INTER[484]=0
CMD[485]='() pwd'
EXIT[485]=2
DESC[485]='Empty parens before command'
CAT[485]='parentheses'
BONUS[485]=1
INTER[485]=0
CMD[486]='> pwd (ls)'
EXIT[486]=2
DESC[486]='Redirect then subshell'
CAT[486]='parentheses'
BONUS[486]=1
INTER[486]=0
CMD[487]='(ls||pwd)&&(ls||pwd)'
EXIT[487]=0
DESC[487]='Complex logical subshells'
CAT[487]='parentheses'
BONUS[487]=1
INTER[487]=0
CMD[488]='(lss||pwd)&&(lss||pwd)'
EXIT[488]=0
DESC[488]='Subshells with errors'
CAT[488]='parentheses'
BONUS[488]=1
INTER[488]=0
CMD[489]='(lss&&pwd)&&(lss&&pwd)'
EXIT[489]=127
DESC[489]='And subshells with errors'
CAT[489]='parentheses'
BONUS[489]=1
INTER[489]=0
CMD[490]='(ls && pwd | wc) > hola'
EXIT[490]=0
DESC[490]='Subshell pipe redirect'
CAT[490]='parentheses'
BONUS[490]=1
INTER[490]=0
CMD[491]='(pwd | wc) < hola'
EXIT[491]=0
DESC[491]='Subshell pipe input'
CAT[491]='parentheses'
BONUS[491]=1
INTER[491]=0
CMD[492]='(ls && pwd | wc) < hola'
EXIT[492]=0
DESC[492]='Subshell and pipe input'
CAT[492]='parentheses'
BONUS[492]=1
INTER[492]=0
CMD[493]='(ls -z || pwd | wc) < hola'
EXIT[493]=0
DESC[493]='Subshell error or pipe'
CAT[493]='parentheses'
BONUS[493]=1
INTER[493]=0
CMD[494]='(ls -z || pwd && ls)'
EXIT[494]=0
DESC[494]='Subshell complex logic'
CAT[494]='parentheses'
BONUS[494]=1
INTER[494]=0
CMD[495]='ls || (cat Makefile|grep srcs) && (pwd|wc)'
EXIT[495]=0
DESC[495]='Mixed subshells pipes'
CAT[495]='parentheses'
BONUS[495]=1
INTER[495]=0
CMD[496]='ls -z && (ls) && (pwd)'
EXIT[496]=130
DESC[496]='Error and subshells'
CAT[496]='parentheses'
BONUS[496]=1
INTER[496]=0
CMD[497]='(ls > Docs/hey && pwd) > hola'
EXIT[497]=0
DESC[497]='Nested redirects subshell'
CAT[497]='parentheses'
BONUS[497]=1
INTER[497]=0
CMD[498]='ls > Docs/hey && pwd > hola'
EXIT[498]=0
DESC[498]='And with redirects no parens'
CAT[498]='parentheses'
BONUS[498]=1
INTER[498]=0
CMD[499]='cd ../.. && pwd && pwd'
EXIT[499]=0
DESC[499]='Cd and pwd twice'
CAT[499]='parentheses'
BONUS[499]=1
INTER[499]=0
CMD[500]='(cd ../.. && pwd) && pwd'
EXIT[500]=0
DESC[500]='Cd subshell and pwd'
CAT[500]='parentheses'
BONUS[500]=1
INTER[500]=0
CMD[501]='ls -z || cd ../../..&&pwd'
EXIT[501]=0
DESC[501]='Error or cd and pwd'
CAT[501]='parentheses'
BONUS[501]=1
INTER[501]=0
CMD[502]='ls -z || (cd ../../..&&pwd)'
EXIT[502]=0
DESC[502]='Error or subshell cd pwd'
CAT[502]='parentheses'
BONUS[502]=1
INTER[502]=0
CMD[503]='ls *'
EXIT[503]=0
DESC[503]='Wildcard all'
CAT[503]='wildcards'
BONUS[503]=1
INTER[503]=0
CMD[504]='ls *.*'
EXIT[504]=0
DESC[504]='Wildcard with dot'
CAT[504]='wildcards'
BONUS[504]=1
INTER[504]=0
CMD[505]='ls *.hola'
EXIT[505]=2
DESC[505]='Wildcard no match'
CAT[505]='wildcards'
BONUS[505]=1
INTER[505]=0
CMD[506]='cat M*le'
EXIT[506]=0
DESC[506]='Wildcard in filename'
CAT[506]='wildcards'
BONUS[506]=1
INTER[506]=0
CMD[507]='cat M*ee'
EXIT[507]=1
DESC[507]='Wildcard no match cat'
CAT[507]='wildcards'
BONUS[507]=1
INTER[507]=0
CMD[508]='cat Make*file'
EXIT[508]=0
DESC[508]='Wildcard middle'
CAT[508]='wildcards'
BONUS[508]=1
INTER[508]=0
CMD[509]='echo *'
EXIT[509]=0
DESC[509]='Echo wildcard'
CAT[509]='wildcards'
BONUS[509]=1
INTER[509]=0
CMD[510]='echo '\''*'\'''
EXIT[510]=0
DESC[510]='Echo quoted wildcard'
CAT[510]='wildcards'
BONUS[510]=1
INTER[510]=0
CMD[511]='echo D*'
EXIT[511]=0
DESC[511]='Echo wildcard prefix'
CAT[511]='wildcards'
BONUS[511]=1
INTER[511]=0
CMD[512]='echo *Z'
EXIT[512]=0
DESC[512]='Echo wildcard suffix no match'
CAT[512]='wildcards'
BONUS[512]=1
INTER[512]=0
CMD[513]='echo *t hola'
EXIT[513]=0
DESC[513]='Echo wildcard with arg'
CAT[513]='wildcards'
BONUS[513]=1
INTER[513]=0
CMD[514]='echo *t'
EXIT[514]=0
DESC[514]='Echo wildcard suffix'
CAT[514]='wildcards'
BONUS[514]=1
INTER[514]=0
CMD[515]='echo $*'
EXIT[515]=0
DESC[515]='Echo dollar wildcard'
CAT[515]='wildcards'
BONUS[515]=1
INTER[515]=0
CMD[516]='echo hola*hola *'
EXIT[516]=0
DESC[516]='Echo mixed wildcards'
CAT[516]='wildcards'
BONUS[516]=1
INTER[516]=0
CMD[517]='echo $hola*'
EXIT[517]=0
DESC[517]='Echo var wildcard'
CAT[517]='wildcards'
BONUS[517]=1
INTER[517]=0
CMD[518]='echo $HOME*'
EXIT[518]=0
DESC[518]='Echo HOME wildcard'
CAT[518]='wildcards'
BONUS[518]=1
INTER[518]=0
CMD[519]='cd *'
EXIT[519]=0
DESC[519]='Cd wildcard single dir'
CAT[519]='wildcards'
BONUS[519]=1
INTER[519]=0
CMD[520]='cd *'
EXIT[520]=1
DESC[520]='Cd wildcard multiple'
CAT[520]='wildcards'
BONUS[520]=1
INTER[520]=0

# Category counters
declare -A CATEGORY_TOTAL CATEGORY_PASSED CATEGORY_FAILED CATEGORY_SKIPPED

main() {
    local filter_category="$1"

    echo "========================================"
    echo "Minishell Complete Test Suite"
    echo "Total tests: 521"
    echo "========================================"
    echo ""

    setup_test_env
    trap cleanup_test_env EXIT

    echo "[" > "$RESULTS_FILE"

    local total=0 passed=0 failed=0 skipped=0 first=1

    for (( i=0; i<NUM_TESTS; i++ )); do
        local cmd="${CMD[$i]}"
        local expected_exit="${EXIT[$i]}"
        local desc="${DESC[$i]}"
        local category="${CAT[$i]}"
        local is_bonus="${BONUS[$i]}"
        local is_interactive="${INTER[$i]}"

        # Filter by category
        if [ -n "$filter_category" ] && [ "$category" != "$filter_category" ]; then
            continue
        fi

        total=$((total + 1))
        CATEGORY_TOTAL[$category]=$(( ${CATEGORY_TOTAL[$category]:-0} + 1 ))

        [ $first -eq 0 ] && echo "," >> "$RESULTS_FILE"
        first=0

        run_test "$cmd" "$expected_exit" "$desc" "$category" "$is_bonus" "$is_interactive"
        result=$?

        if [ $result -eq 0 ]; then
            passed=$((passed + 1))
            CATEGORY_PASSED[$category]=$(( ${CATEGORY_PASSED[$category]:-0} + 1 ))
        elif [ $result -eq 2 ]; then
            skipped=$((skipped + 1))
            CATEGORY_SKIPPED[$category]=$(( ${CATEGORY_SKIPPED[$category]:-0} + 1 ))
        else
            failed=$((failed + 1))
            CATEGORY_FAILED[$category]=$(( ${CATEGORY_FAILED[$category]:-0} + 1 ))
        fi
    done

    echo "]" >> "$RESULTS_FILE"

    echo "" | tee -a "$SUMMARY_FILE"
    echo "========================================" | tee -a "$SUMMARY_FILE"
    echo "Summary by Category" | tee -a "$SUMMARY_FILE"
    echo "========================================" | tee -a "$SUMMARY_FILE"
    for category in "${!CATEGORY_TOTAL[@]}"; do
        local cat_total=${CATEGORY_TOTAL[$category]}
        local cat_passed=${CATEGORY_PASSED[$category]:-0}
        local cat_failed=${CATEGORY_FAILED[$category]:-0}
        local cat_skipped=${CATEGORY_SKIPPED[$category]:-0}
        local line="$category: $cat_passed passed, $cat_failed failed, $cat_skipped skipped / $cat_total total"
        echo -e "${BLUE}$line${NC}"; echo "$line" >> "$SUMMARY_FILE"
    done

    echo "" | tee -a "$SUMMARY_FILE"
    echo "========================================" | tee -a "$SUMMARY_FILE"
    echo "Overall Results" | tee -a "$SUMMARY_FILE"
    echo "========================================" | tee -a "$SUMMARY_FILE"
    echo -e "Total: $total | ${GREEN}Passed: $passed${NC} | ${RED}Failed: $failed${NC} | ${YELLOW}Skipped: $skipped${NC}" | tee -a "$SUMMARY_FILE"
    local pass_rate=0
    if [ $total -gt 0 ]; then
        pass_rate=$((passed * 100 / total))
    fi
    echo -e "Pass rate: $pass_rate%" | tee -a "$SUMMARY_FILE"
    echo "========================================" | tee -a "$SUMMARY_FILE"

    echo "RESULT: $passed/$total $RESULTS_FILE"

    exit $failed
}

# CLI
SKIP_BONUS=0
AUTOMATED=1
CATEGORY=""

while [[ $# -gt 0 ]]; do
    case $1 in
        --category)
            CATEGORY="$2"; shift 2;;
        --with-bonus)
            SKIP_BONUS=0; shift;;
        --no-bonus)
            SKIP_BONUS=1; shift;;
        --interactive)
            AUTOMATED=0; shift;;
        *)
            echo "Unknown option: $1" >&2
            echo "Usage: $0 [--category CATEGORY] [--with-bonus|--no-bonus] [--interactive]" >&2
            exit 1;;
    esac
done

    main "$CATEGORY"
